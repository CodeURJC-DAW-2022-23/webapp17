"use strict";(()=>{var ou=Object.create;var wn=Object.defineProperty,iu=Object.defineProperties,su=Object.getOwnPropertyDescriptor,au=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertyNames,kn=Object.getOwnPropertySymbols,lu=Object.getPrototypeOf,ai=Object.prototype.hasOwnProperty,Xs=Object.prototype.propertyIsEnumerable;var Ks=(t,e,r)=>e in t?wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,re=(t,e)=>{for(var r in e||={})ai.call(e,r)&&Ks(t,r,e[r]);if(kn)for(var r of kn(e))Xs.call(e,r)&&Ks(t,r,e[r]);return t},ae=(t,e)=>iu(t,au(e));var Qe=(t,e)=>{var r={};for(var n in t)ai.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&kn)for(var n of kn(t))e.indexOf(n)<0&&Xs.call(t,n)&&(r[n]=t[n]);return r};var ce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Qs=(t,e)=>{for(var r in e)wn(t,r,{get:e[r],enumerable:!0})},uu=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of cu(e))!ai.call(t,o)&&o!==r&&wn(t,o,{get:()=>e[o],enumerable:!(n=su(e,o))||n.enumerable});return t};var du=(t,e,r)=>(r=t!=null?ou(lu(t)):{},uu(e||!t||!t.__esModule?wn(r,"default",{value:t,enumerable:!0}):r,t));var Yt=(t,e,r)=>new Promise((n,o)=>{var i=l=>{try{a(r.next(l))}catch(u){o(u)}},s=l=>{try{a(r.throw(l))}catch(u){o(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,s);a((r=r.apply(t,e)).next())});var Ga=ce($r=>{$r.compare=zp;$r.reduce=Hp;var $p,io,Fp,so,Br;$r.REMOVE=$p=io=-1;$r.ADD=Fp=so=1;$r.EQUAL=Br=0;function zp(t,e){var r=t.length,n=e.length,o=Yp(t,e),i=o<r&&o<n?Jp(t,e,o):0,s=i+o-1;r-=s,n-=s;for(var a=Wp(r,n),l=r-1;l>=0;--l)for(var u=n-1;u>=0;--u)a[u][l]=qp(a,t,e,o,l,u);return{prefix:o,matrix:a,suffix:i}}function Hp(t,e,r){var n,o,i,s,a=r.matrix,l=r.prefix;for(n=0;n<l;++n)e=t(e,Br,n,n);for(i=n,l=a.length,n=0,o=0;n<l;)switch(s=a[n][o].type,e=t(e,s,n+i,o+i),s){case Br:++n,++o;break;case io:++o;break;case so:++n;break}for(n+=i,o+=i,l=r.suffix,i=0;i<l;++i)e=t(e,Br,n+i,o+i);return e}function Yp(t,e){for(var r=0,n=Math.min(t.length,e.length);r<n&&t[r]===e[r];)++r;return r}function Jp(t,e){for(var r=t.length-1,n=e.length-1,o=Math.min(r,n),i=0;i<o&&t[r-i]===e[n-i];)++i;return i}function qp(t,e,r,n,o,i){return e[o+n]===r[i+n]?{value:t[i+1][o+1].value,type:Br}:t[i][o+1].value<t[i+1][o].value?{value:t[i][o+1].value+1,type:io}:{value:t[i+1][o].value+1,type:so}}function Wp(t,e){var r=[],n,o,i;for(i=r[e]=[],o=0;o<t;++o)i[o]={value:t-o,type:io};for(n=0;n<e;++n)r[n]=[],r[n][t]={value:e-n,type:so};return r[e][t]={value:0,type:Br},r}});var Ii=ce(ao=>{ao.cons=Vp;ao.tail=Zp;ao.map=Kp;function Vp(t,e){var r=e.length,n=new Array(r+1);n[0]=t;for(var o=0;o<r;++o)n[o+1]=e[o];return n}function Zp(t){for(var e=t.length-1,r=new Array(e),n=0;n<e;++n)r[n]=t[n+1];return r}function Kp(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n)r[n]=t(e[n]);return r}});var La=ce((Ty,Ua)=>{Ua.exports=ef;var co=/\/|~1|~0/g,Ri="/",Xp="~",Qp="~1";function ef(t,e){var r,n,o,i;for(r=t.charAt(0)===Ri?1:0,n="",co.lastIndex=r;o=co.exec(t);)if(i=o[0],n+=t.slice(r,co.lastIndex-i.length),r=co.lastIndex,i===Ri){if(e(n)===!1)return t;n=""}else n+=i===Qp?Ri:Xp;return n+=t.slice(r),e(n),t}});var lo=ce(He=>{var Ba=La();He.find=lf;He.join=df;He.absolute=uf;He.parse=pf;He.contains=ff;He.encodeSegment=hf;He.decodeSegment=mf;He.parseArrayIndex=Ni;He.isValidArrayIndex=$a;var Fr="/",tf=/\//g,rf="~1",nf=/~1/g,of="~",sf=/~/g,af="~0",cf=/~0/g;function lf(t,e,r,n){if(typeof e=="string"){if(e==="")return{target:t,key:void 0};if(e===Fr)return{target:t,key:""};var o=t,i,s=n!==void 0;return Ba(e,function(a){if(t==null)return o=null,!1;Array.isArray(t)?i=s?_f(r,Ni(a),t,n):a==="-"?a:Ni(a):i=a,o=t,t=t[i]}),o===null?void 0:{target:o,key:i}}}function uf(t){return t[0]===Fr?t:Fr+t}function df(t){return t.join(Fr)}function pf(t){var e=[];return Ba(t,e.push.bind(e)),e}function ff(t,e){return e.indexOf(t)===0&&e[t.length]===Fr}function mf(t){return t.replace(nf,Fr).replace(cf,of)}function hf(t){return t.replace(sf,af).replace(tf,rf)}var gf=/^(0|[1-9]\d*)$/;function $a(t){return gf.test(t)}function Ni(t){if($a(t))return+t;throw new SyntaxError("invalid array index "+t)}function _f(t,e,r,n){var o=e;if(o<0)throw new Error("array index out of bounds "+o);if(n!==void 0&&typeof t=="function"&&(o=t(e,r,n),o<0))throw new Error("could not find patch context "+n);return o}});var Oi=ce((xy,Fa)=>{Fa.exports=Ci;function Ci(t){return t==null||typeof t!="object"?t:Array.isArray(t)?yf(t):bf(t)}function yf(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=Ci(t[n]);return r}function bf(t){for(var e=Object.keys(t),r={},n,o=0,i=e.length;o<i;++o)n=e[o],r[n]=Ci(t[n]);return r}});var Ha=ce((jy,za)=>{za.exports=Di;function Di(t,e){return t===e?!0:Array.isArray(t)&&Array.isArray(e)?vf(t,e):typeof t=="object"&&typeof e=="object"?Ef(t,e):!1}function vf(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!Di(t[r],e[r]))return!1;return!0}function Ef(t,e){if(t===null&&e!==null||t!==null&&e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var o=0,i;o<r.length;++o)if(i=r[o],!(i in e&&Di(t[i],e[i])))return!1;return!0}});var Wa=ce((Py,qa)=>{var oe=lo();qa.exports=function(e,r){var n=oe.parse(e.path),o=oe.parse(r.path),i=Pf(n,o),s=xf(n,o,i.length),a=Ja(e),l=Ja(r);return i.length===0&&!s?[l,a]:s?Sf(a,n,l,o):Tf(a,n,l,o)};function Tf(t,e,r,n){if(t.path===r.path)throw new TypeError("cannot commute "+t.op+","+r.op+" with identical object paths");return[r,t]}function Sf(t,e,r,n){return e.length===n.length?jf(t,e,r,n):(e.length>n.length?(e=Ya(r,n,t,e,-1),t.path=oe.absolute(oe.join(e))):(n=Ya(t,e,r,n,1),r.path=oe.absolute(oe.join(n))),[r,t])}function xf(t,e,r){return oe.isValidArrayIndex(t[r])&&oe.isValidArrayIndex(e[r])}function jf(t,e,r,n){var o=e.length-1,i=+e[o],s=+n[o],a;return i<s?t.op==="add"||t.op==="copy"?(a=n.slice(),a[o]=Math.max(0,s-1),r.path=oe.absolute(oe.join(a))):t.op==="remove"&&(a=n.slice(),a[o]=s+1,r.path=oe.absolute(oe.join(a))):r.op==="add"||r.op==="copy"?(a=e.slice(),a[o]=i+1,t.path=oe.absolute(oe.join(a))):i>s&&r.op==="remove"&&(a=e.slice(),a[o]=Math.max(0,i-1),t.path=oe.absolute(oe.join(a))),[r,t]}function Ya(t,e,r,n,o){var i=e.length-1,s=+e[i],a=+n[i],l=n.slice();return s>a||(t.op==="add"||t.op==="copy"?l[i]=Math.max(0,a-o):t.op==="remove"&&(l[i]=Math.max(0,a+o))),l}function Pf(t,e){var r=t.length,n=e.length;if(r===0||n===0||r<2&&n<2)return[];for(var o=r===n?r-1:Math.min(r,n),i=0;i<o&&t[i]===e[i];)++i;return t.slice(0,i)}function Ja(t){return t.op==="remove"?{op:t.op,path:t.path}:t.op==="copy"||t.op==="move"?{op:t.op,path:t.path,from:t.from}:{op:t.op,path:t.path,value:t.value}}});var Ai=ce((ky,Va)=>{Va.exports=uo;function uo(t){Error.call(this),this.name=this.constructor.name,this.message=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}uo.prototype=Object.create(Error.prototype);uo.prototype.constructor=uo});var fo=ce((wy,Za)=>{Za.exports=po;function po(t){Error.call(this),this.name=this.constructor.name,this.message=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}po.prototype=Object.create(Error.prototype);po.prototype.constructor=po});var Mi=ce((Iy,Ka)=>{Ka.exports=mo;function mo(t){Error.call(this),this.name=this.constructor.name,this.message=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}mo.prototype=Object.create(Error.prototype);mo.prototype.constructor=mo});var $i=ce(dr=>{var Gi=lo(),Ui=Oi(),kf=Ha(),sn=Wa(),ho=Ii(),wf=Ai(),Ye=fo(),Li=Mi(),It=Gi.find,go=Gi.parseArrayIndex;dr.test={apply:If,inverse:Rf,commute:Nf};dr.add={apply:Cf,inverse:Of,commute:Xa};dr.remove={apply:Gf,inverse:Uf,commute:Lf};dr.replace={apply:Df,inverse:Af,commute:Mf};dr.move={apply:Bf,inverse:$f,commute:Ff};dr.copy={apply:zf,inverse:Hf,commute:Xa};function If(t,e,r){var n=It(t,e.path,r.findContext,e.context),o=n.target,i,s;if(Array.isArray(o)?(i=go(n.key),s=o[i]):s=n.key===void 0?n.target:n.target[n.key],!kf(s,e.value))throw new wf("test failed "+JSON.stringify(e));return t}function Rf(t,e){return t.push(e),1}function Nf(t,e){if(t.path===e.path&&e.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return e.op==="test"||e.op==="replace"?[e,t]:sn(t,e)}function Cf(t,e,r){var n=It(t,e.path,r.findContext,e.context);if(_o(n))throw new Ye("path does not exist "+e.path);if(e.value===void 0)throw new Ye("missing value");var o=Ui(e.value);return n.key===void 0?o:(Bi(n,o),t)}function Bi(t,e){var r=t.target;if(Array.isArray(r))if(t.key==="-")r.push(e);else{if(t.key>r.length)throw new Ye("target of add outside of array bounds");r.splice(t.key,0,e)}else if(tc(r))r[t.key]=e;else throw new Ye("target of add must be an object or array "+t.key)}function Of(t,e){var r=e.context;return r!==void 0&&(r={before:r.before,after:ho.cons(e.value,r.after)}),t.push({op:"test",path:e.path,value:e.value,context:r}),t.push({op:"remove",path:e.path,context:r}),1}function Xa(t,e){if(t.path===e.path&&e.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return sn(t,e)}function Df(t,e,r){var n=It(t,e.path,r.findContext,e.context);if(_o(n)||ec(n))throw new Ye("path does not exist "+e.path);if(e.value===void 0)throw new Ye("missing value");var o=Ui(e.value);if(n.key===void 0)return o;var i=n.target;return Array.isArray(i)?i[go(n.key)]=o:i[n.key]=o,t}function Af(t,e,r,n){var o=n[r-1];if(o===void 0||o.op!=="test"||o.path!==e.path)throw new Li("cannot invert replace w/o test");var i=o.context;return i!==void 0&&(i={before:i.before,after:ho.cons(o.value,ho.tail(i.after))}),t.push({op:"test",path:o.path,value:e.value}),t.push({op:"replace",path:o.path,value:o.value}),2}function Mf(t,e){if(t.path===e.path&&e.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return e.op==="test"||e.op==="replace"?[e,t]:sn(t,e)}function Gf(t,e,r){var n=It(t,e.path,r.findContext,e.context);if(_o(n)||n.target[n.key]===void 0)throw new Ye("path does not exist "+e.path);return Qa(n),t}function Qa(t){var e=t.target,r;if(Array.isArray(e))return r=e.splice(go(t.key),1),r[0];if(tc(e))return r=e[t.key],delete e[t.key],r;throw new Ye("target of remove must be an object or array")}function Uf(t,e,r,n){var o=n[r-1];if(o===void 0||o.op!=="test"||o.path!==e.path)throw new Li("cannot invert remove w/o test");var i=o.context;return i!==void 0&&(i={before:i.before,after:ho.tail(i.after)}),t.push({op:"add",path:o.path,value:o.value,context:i}),2}function Lf(t,e){return t.path===e.path&&e.op==="remove"?[e,t]:sn(t,e)}function Bf(t,e,r){if(Gi.contains(e.path,e.from))throw new Ye("move.from cannot be ancestor of move.path");var n=It(t,e.path,r.findContext,e.context),o=It(t,e.from,r.findContext,e.fromContext);return Bi(n,Qa(o)),t}function $f(t,e){return t.push({op:"move",path:e.from,context:e.fromContext,from:e.path,fromContext:e.context}),1}function Ff(t,e){if(t.path===e.path&&e.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return sn(t,e)}function zf(t,e,r){var n=It(t,e.path,r.findContext,e.context),o=It(t,e.from,r.findContext,e.fromContext);if(_o(o)||ec(o))throw new Ye("copy.from must exist");var i=o.target,s;return Array.isArray(i)?s=i[go(o.key)]:s=i[o.key],Bi(n,Ui(s)),t}function Hf(t,e){throw new Li("cannot invert "+e.op)}function _o(t){return t===void 0||t.target==null&&t.key!==void 0}function ec(t){return t.key!==void 0&&t.target[t.key]===void 0}function tc(t){return t!==null&&typeof t=="object"}});var ic=ce(zr=>{var Yf=$i(),rc=Oi(),Jf=fo();zr.apply=Wf;zr.applyInPlace=nc;zr.clone=rc;zr.isValidObject=oc;zr.defaultHash=Vf;var qf={};function Wf(t,e,r){return nc(t,rc(e),r)}function nc(t,e,r){if(r||(r=qf),!Array.isArray(t))return e;for(var n,o,i=0;i<t.length;++i){if(o=t[i],n=Yf[o.op],n===void 0)throw new Jf("invalid op "+JSON.stringify(o));e=n.apply(e,o,r)}return e}function Vf(t){return oc(t)||Zf(t)?JSON.stringify(t):t}function oc(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Zf(t){return Object.prototype.toString.call(t)==="[object Array]"}});var ac=ce((Cy,sc)=>{var Kf=$i();sc.exports=function(e){var r=[],n,o;for(n=e.length-1;n>=0;n-=o)o=Xf(r,e[n],n,e);return r};function Xf(t,e,r,n){var o=Kf[e.op];return o!==void 0&&typeof o.inverse=="function"?o.inverse(t,e,r,n):1}});var fc=ce(lt=>{var yo=Ga(),cc=Ii(),an=ic(),Qf=ac(),em=lo(),lc=em.encodeSegment;lt.diff=tm;lt.patch=an.apply;lt.patchInPlace=an.applyInPlace;lt.inverse=Qf;lt.clone=an.clone;lt.InvalidPatchOperationError=fo();lt.TestFailedError=Ai();lt.PatchNotInvertibleError=Mi();var uc=an.isValidObject,dc=an.defaultHash;function tm(t,e,r){return Hi(t,e,"",rm(r,[])).patch}function rm(t,e){return typeof t=="object"?{patch:e,hash:Fi(zi,t.hash,dc),makeContext:Fi(zi,t.makeContext,pc),invertible:t.invertible!==!1}:{patch:e,hash:Fi(zi,t,dc),makeContext:pc,invertible:!0}}function Hi(t,e,r,n){return Array.isArray(t)&&Array.isArray(e)?om(t,e,r,n):uc(t)&&uc(e)?nm(t,e,r,n):sm(t,e,r,n)}function nm(t,e,r,n){var o=Object.keys(e),i=n.patch,s,a;for(s=o.length-1;s>=0;--s){a=o[s];var l=r+"/"+lc(a);t[a]!==void 0?Hi(t[a],e[a],l,n):i.push({op:"add",path:l,value:e[a]})}for(o=Object.keys(t),s=o.length-1;s>=0;--s)if(a=o[s],e[a]===void 0){var u=r+"/"+lc(a);n.invertible&&i.push({op:"test",path:u,value:t[a]}),i.push({op:"remove",path:u})}return n}function om(t,e,r,n){var o=cc.map(n.hash,t),i=cc.map(n.hash,e),s=yo.compare(o,i);return im(t,e,r,n,s)}function im(t,e,r,n,o){var i=0;return yo.reduce(function(s,a,l,u){var d,g,S=s.patch,E=r+"/"+(u+i);return a===yo.REMOVE?(d=S[S.length-1],g=s.makeContext(u,t),s.invertible&&S.push({op:"test",path:E,value:t[u],context:g}),d!==void 0&&d.op==="add"&&d.path===E?(d.op="replace",d.context=g):S.push({op:"remove",path:E,context:g}),i-=1):a===yo.ADD?(S.push({op:"add",path:E,value:e[l],context:s.makeContext(u,t)}),i+=1):Hi(t[u],e[l],E,s),s},n,o)}function sm(t,e,r,n){return t!==e&&(n.invertible&&n.patch.push({op:"test",path:r,value:t}),n.patch.push({op:"replace",path:r,value:e})),n}function Fi(t,e,r){return t(e)?e:r}function pc(){}function zi(t){return typeof t=="function"}});var R;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function r(o){throw new Error}t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let s of o)i[s]=s;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(a=>typeof o[o[a]]!="number"),s={};for(let a of i)s[a]=o[a];return t.objectValues(s)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let s in o)Object.prototype.hasOwnProperty.call(o,s)&&i.push(s);return i},t.find=(o,i)=>{for(let s of o)if(i(s))return s},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(R||(R={}));var _=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Et=t=>{switch(typeof t){case"undefined":return _.undefined;case"string":return _.string;case"number":return isNaN(t)?_.nan:_.number;case"boolean":return _.boolean;case"function":return _.function;case"bigint":return _.bigint;case"symbol":return _.symbol;case"object":return Array.isArray(t)?_.array:t===null?_.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?_.promise:typeof Map<"u"&&t instanceof Map?_.map:typeof Set<"u"&&t instanceof Set?_.set:typeof Date<"u"&&t instanceof Date?_.date:_.object;default:return _.unknown}},h=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),pu=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ie=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=i=>{for(let s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(o);else if(s.code==="invalid_return_type")o(s.returnTypeError);else if(s.code==="invalid_arguments")o(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let a=n,l=0;for(;l<s.path.length;){let u=s.path[l];l===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(s))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return o(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ie.create=t=>new Ie(t);var tn=(t,e)=>{let r;switch(t.code){case h.invalid_type:t.received===_.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case h.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,R.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:r=`Unrecognized key(s) in object: ${R.joinValues(t.keys,", ")}`;break;case h.invalid_union:r="Invalid input";break;case h.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${R.joinValues(t.options)}`;break;case h.invalid_enum_value:r=`Invalid enum value. Expected ${R.joinValues(t.options)}, received '${t.received}'`;break;case h.invalid_arguments:r="Invalid function arguments";break;case h.invalid_return_type:r="Invalid function return type";break;case h.invalid_date:r="Invalid date";break;case h.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:R.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case h.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(t.minimum)}`:r="Invalid input";break;case h.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(t.maximum)}`:r="Invalid input";break;case h.custom:r="Invalid input";break;case h.invalid_intersection_types:r="Intersection results could not be merged";break;case h.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case h.not_finite:r="Number must be finite";break;default:r=e.defaultError,R.assertNever(t)}return{message:r}},na=tn;function fu(t){na=t}function Rn(){return na}var Nn=t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],s={...o,path:i},a="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)a=u(s,{data:e,defaultError:a}).message;return{...o,path:i,message:o.message||a}},mu=[];function y(t,e){let r=Nn({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rn(),tn].filter(n=>!!n)});t.common.issues.push(r)}var ee=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return T;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r)n.push({key:await o.key,value:await o.value});return ee.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:s}=o;if(i.status==="aborted"||s.status==="aborted")return T;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),(typeof s.value<"u"||o.alwaysSet)&&(n[i.value]=s.value)}return{status:e.value,value:n}}},T=Object.freeze({status:"aborted"}),oa=t=>({status:"dirty",value:t}),ne=t=>({status:"valid",value:t}),ci=t=>t.status==="aborted",li=t=>t.status==="dirty",Cn=t=>t.status==="valid",On=t=>typeof Promise!==void 0&&t instanceof Promise,k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var Te=class{constructor(e,r,n,o){this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._path.concat(this._key)}},ea=(t,e)=>{if(Cn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new Ie(t.common.issues)}};function P(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(s,a)=>s.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:o}}var x=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Et(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ee,ctx:{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(On(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let o={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},i=this._parseSync({data:e,path:o.path,parent:o});return ea(o,i)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(On(o)?o:Promise.resolve(o));return ea(n,i)}refine(e,r){let n=o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r;return this._refinement((o,i)=>{let s=e(o),a=()=>i.addIssue({code:h.custom,...n(o)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new pe({schema:this,typeName:v.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ee.create(this)}nullable(){return nt.create(this)}nullish(){return this.optional().nullable()}array(){return de.create(this)}promise(){return xt.create(this)}or(e){return Zt.create([this,e])}and(e){return Kt.create(this,e)}transform(e){return new pe({schema:this,typeName:v.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new nr({innerType:this,defaultValue:r,typeName:v.ZodDefault})}brand(){return new An({typeName:v.ZodBranded,type:this,...P(void 0)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Cr({innerType:this,defaultValue:r,typeName:v.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return or.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},hu=/^c[^\s-]{8,}$/i,gu=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,_u=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,yu=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}:\\d{2})|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),Re=class extends x{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(o=>e.test(o),{validation:r,code:h.invalid_string,...k.errToObj(n)}),this.nonempty=e=>this.min(1,k.errToObj(e)),this.trim=()=>new Re({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==_.string){let i=this._getOrReturnCtx(e);return y(i,{code:h.invalid_type,expected:_.string,received:i.parsedType}),T}let n=new ee,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),y(o,{code:h.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),y(o,{code:h.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let s=e.data.length>i.value,a=e.data.length<i.value;(s||a)&&(o=this._getOrReturnCtx(e,o),s?y(o,{code:h.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&y(o,{code:h.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")_u.test(e.data)||(o=this._getOrReturnCtx(e,o),y(o,{validation:"email",code:h.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")gu.test(e.data)||(o=this._getOrReturnCtx(e,o),y(o,{validation:"uuid",code:h.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")hu.test(e.data)||(o=this._getOrReturnCtx(e,o),y(o,{validation:"cuid",code:h.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),y(o,{validation:"url",code:h.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),y(o,{validation:"regex",code:h.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),y(o,{code:h.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),y(o,{code:h.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?yu(i).test(e.data)||(o=this._getOrReturnCtx(e,o),y(o,{code:h.invalid_string,validation:"datetime",message:i.message}),n.dirty()):R.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new Re({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...k.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Re.create=t=>{var e;return new Re({checks:[],typeName:v.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...P(t)})};function bu(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=parseInt(t.toFixed(o).replace(".","")),s=parseInt(e.toFixed(o).replace(".",""));return i%s/Math.pow(10,o)}var ze=class extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==_.number){let i=this._getOrReturnCtx(e);return y(i,{code:h.invalid_type,expected:_.number,received:i.parsedType}),T}let n,o=new ee;for(let i of this._def.checks)i.kind==="int"?R.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:h.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:h.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:h.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?bu(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),y(n,{code:h.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:h.not_finite,message:i.message}),o.dirty()):R.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,n,o){return new ze({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:k.toString(o)}]})}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}};ze.create=t=>new ze({checks:[],typeName:v.ZodNumber,coerce:t?.coerce||!1,...P(t)});var Jt=class extends x{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==_.bigint){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.bigint,received:n.parsedType}),T}return ne(e.data)}};Jt.create=t=>{var e;return new Jt({typeName:v.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...P(t)})};var qt=class extends x{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==_.boolean){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.boolean,received:n.parsedType}),T}return ne(e.data)}};qt.create=t=>new qt({typeName:v.ZodBoolean,coerce:t?.coerce||!1,...P(t)});var tt=class extends x{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==_.date){let i=this._getOrReturnCtx(e);return y(i,{code:h.invalid_type,expected:_.date,received:i.parsedType}),T}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return y(i,{code:h.invalid_date}),T}let n=new ee,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),y(o,{code:h.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),y(o,{code:h.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):R.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};tt.create=t=>new tt({checks:[],coerce:t?.coerce||!1,typeName:v.ZodDate,...P(t)});var wr=class extends x{_parse(e){if(this._getType(e)!==_.symbol){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.symbol,received:n.parsedType}),T}return ne(e.data)}};wr.create=t=>new wr({typeName:v.ZodSymbol,...P(t)});var Wt=class extends x{_parse(e){if(this._getType(e)!==_.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.undefined,received:n.parsedType}),T}return ne(e.data)}};Wt.create=t=>new Wt({typeName:v.ZodUndefined,...P(t)});var Vt=class extends x{_parse(e){if(this._getType(e)!==_.null){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.null,received:n.parsedType}),T}return ne(e.data)}};Vt.create=t=>new Vt({typeName:v.ZodNull,...P(t)});var St=class extends x{constructor(){super(...arguments),this._any=!0}_parse(e){return ne(e.data)}};St.create=t=>new St({typeName:v.ZodAny,...P(t)});var et=class extends x{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ne(e.data)}};et.create=t=>new et({typeName:v.ZodUnknown,...P(t)});var Ne=class extends x{_parse(e){let r=this._getOrReturnCtx(e);return y(r,{code:h.invalid_type,expected:_.never,received:r.parsedType}),T}};Ne.create=t=>new Ne({typeName:v.ZodNever,...P(t)});var Ir=class extends x{_parse(e){if(this._getType(e)!==_.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.void,received:n.parsedType}),T}return ne(e.data)}};Ir.create=t=>new Ir({typeName:v.ZodVoid,...P(t)});var de=class extends x{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==_.array)return y(r,{code:h.invalid_type,expected:_.array,received:r.parsedType}),T;if(o.exactLength!==null){let s=r.data.length>o.exactLength.value,a=r.data.length<o.exactLength.value;(s||a)&&(y(r,{code:s?h.too_big:h.too_small,minimum:a?o.exactLength.value:void 0,maximum:s?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(y(r,{code:h.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(y(r,{code:h.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all(r.data.map((s,a)=>o.type._parseAsync(new Te(r,s,r.path,a)))).then(s=>ee.mergeArray(n,s));let i=r.data.map((s,a)=>o.type._parseSync(new Te(r,s,r.path,a)));return ee.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new de({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new de({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new de({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}};de.create=(t,e)=>new de({type:t,minLength:null,maxLength:null,exactLength:null,typeName:v.ZodArray,...P(e)});var Dn;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Dn||(Dn={}));var ta=t=>e=>new G({...t,shape:()=>({...t.shape(),...e})});function kr(t){if(t instanceof G){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Ee.create(kr(n))}return new G({...t._def,shape:()=>e})}else return t instanceof de?de.create(kr(t.element)):t instanceof Ee?Ee.create(kr(t.unwrap())):t instanceof nt?nt.create(kr(t.unwrap())):t instanceof Se?Se.create(t.items.map(e=>kr(e))):t}var G=class extends x{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=ta(this._def),this.extend=ta(this._def)}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=R.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==_.object){let u=this._getOrReturnCtx(e);return y(u,{code:h.invalid_type,expected:_.object,received:u.parsedType}),T}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ne&&this._def.unknownKeys==="strip"))for(let u in o.data)s.includes(u)||a.push(u);let l=[];for(let u of s){let d=i[u],g=o.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Te(o,g,o.path,u)),alwaysSet:u in o.data})}if(this._def.catchall instanceof Ne){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:o.data[d]}});else if(u==="strict")a.length>0&&(y(o,{code:h.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of a){let g=o.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Te(o,g,o.path,d)),alwaysSet:d in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of l){let g=await d.key;u.push({key:g,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>ee.mergeObjectSync(n,u)):ee.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var o,i,s,a;let l=(s=(i=(o=this._def).errorMap)===null||i===void 0?void 0:i.call(o,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=k.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}setKey(e,r){return this.augment({[e]:r})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Dn.mergeShapes(this._def.shape(),e._def.shape()),typeName:v.ZodObject})}catchall(e){return new G({...this._def,catchall:e})}pick(e){let r={};return R.objectKeys(e).map(n=>{this.shape[n]&&(r[n]=this.shape[n])}),new G({...this._def,shape:()=>r})}omit(e){let r={};return R.objectKeys(this.shape).map(n=>{R.objectKeys(e).indexOf(n)===-1&&(r[n]=this.shape[n])}),new G({...this._def,shape:()=>r})}deepPartial(){return kr(this)}partial(e){let r={};if(e)return R.objectKeys(this.shape).map(n=>{R.objectKeys(e).indexOf(n)===-1?r[n]=this.shape[n]:r[n]=this.shape[n].optional()}),new G({...this._def,shape:()=>r});for(let n in this.shape){let o=this.shape[n];r[n]=o.optional()}return new G({...this._def,shape:()=>r})}required(e){let r={};if(e)R.objectKeys(this.shape).map(n=>{if(R.objectKeys(e).indexOf(n)===-1)r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Ee;)i=i._def.innerType;r[n]=i}});else for(let n in this.shape){let i=this.shape[n];for(;i instanceof Ee;)i=i._def.innerType;r[n]=i}return new G({...this._def,shape:()=>r})}keyof(){return ia(R.objectKeys(this.shape))}};G.create=(t,e)=>new G({shape:()=>t,unknownKeys:"strip",catchall:Ne.create(),typeName:v.ZodObject,...P(e)});G.strictCreate=(t,e)=>new G({shape:()=>t,unknownKeys:"strict",catchall:Ne.create(),typeName:v.ZodObject,...P(e)});G.lazycreate=(t,e)=>new G({shape:t,unknownKeys:"strip",catchall:Ne.create(),typeName:v.ZodObject,...P(e)});var Zt=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let s=i.map(a=>new Ie(a.ctx.common.issues));return y(r,{code:h.invalid_union,unionErrors:s}),T}if(r.common.async)return Promise.all(n.map(async i=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(o);{let i,s=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=s.map(l=>new Ie(l));return y(r,{code:h.invalid_union,unionErrors:a}),T}}get options(){return this._def.options}};Zt.create=(t,e)=>new Zt({options:t,typeName:v.ZodUnion,...P(e)});var In=t=>t instanceof Qt?In(t.schema):t instanceof pe?In(t.innerType()):t instanceof er?[t.value]:t instanceof tr?t.options:t instanceof rr?Object.keys(t.enum):t instanceof nr?In(t._def.innerType):t instanceof Wt?[void 0]:t instanceof Vt?[null]:null,Rr=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==_.object)return y(r,{code:h.invalid_type,expected:_.object,received:r.parsedType}),T;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(y(r,{code:h.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),T)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let s=In(i.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of s){if(o.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);o.set(a,i)}}return new Rr({typeName:v.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...P(n)})}};function ui(t,e){let r=Et(t),n=Et(e);if(t===e)return{valid:!0,data:t};if(r===_.object&&n===_.object){let o=R.objectKeys(e),i=R.objectKeys(t).filter(a=>o.indexOf(a)!==-1),s={...t,...e};for(let a of i){let l=ui(t[a],e[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(r===_.array&&n===_.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let s=t[i],a=e[i],l=ui(s,a);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return r===_.date&&n===_.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Kt=class extends x{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=(i,s)=>{if(ci(i)||ci(s))return T;let a=ui(i.value,s.value);return a.valid?((li(i)||li(s))&&r.dirty(),{status:r.value,value:a.data}):(y(n,{code:h.invalid_intersection_types}),T)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,s])=>o(i,s)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Kt.create=(t,e,r)=>new Kt({left:t,right:e,typeName:v.ZodIntersection,...P(r)});var Se=class extends x{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_.array)return y(n,{code:h.invalid_type,expected:_.array,received:n.parsedType}),T;if(n.data.length<this._def.items.length)return y(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),T;!this._def.rest&&n.data.length>this._def.items.length&&(y(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=n.data.map((s,a)=>{let l=this._def.items[a]||this._def.rest;return l?l._parse(new Te(n,s,n.path,a)):null}).filter(s=>!!s);return n.common.async?Promise.all(i).then(s=>ee.mergeArray(r,s)):ee.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Se({...this._def,rest:e})}};Se.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Se({items:t,typeName:v.ZodTuple,rest:null,...P(e)})};var Xt=class extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_.object)return y(n,{code:h.invalid_type,expected:_.object,received:n.parsedType}),T;let o=[],i=this._def.keyType,s=this._def.valueType;for(let a in n.data)o.push({key:i._parse(new Te(n,a,n.path,a)),value:s._parse(new Te(n,n.data[a],n.path,a))});return n.common.async?ee.mergeObjectAsync(r,o):ee.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof x?new Xt({keyType:e,valueType:r,typeName:v.ZodRecord,...P(n)}):new Xt({keyType:Re.create(),valueType:e,typeName:v.ZodRecord,...P(r)})}},Nr=class extends x{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_.map)return y(n,{code:h.invalid_type,expected:_.map,received:n.parsedType}),T;let o=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map(([a,l],u)=>({key:o._parse(new Te(n,a,n.path,[u,"key"])),value:i._parse(new Te(n,l,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let l of s){let u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return T;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let l of s){let u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return T;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}}}};Nr.create=(t,e,r)=>new Nr({valueType:e,keyType:t,typeName:v.ZodMap,...P(r)});var rt=class extends x{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_.set)return y(n,{code:h.invalid_type,expected:_.set,received:n.parsedType}),T;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(y(n,{code:h.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(y(n,{code:h.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function s(l){let u=new Set;for(let d of l){if(d.status==="aborted")return T;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let a=[...n.data.values()].map((l,u)=>i._parse(new Te(n,l,n.path,u)));return n.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(e,r){return new rt({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new rt({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};rt.create=(t,e)=>new rt({valueType:t,minSize:null,maxSize:null,typeName:v.ZodSet,...P(e)});var Tt=class extends x{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==_.function)return y(r,{code:h.invalid_type,expected:_.function,received:r.parsedType}),T;function n(a,l){return Nn({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Rn(),tn].filter(u=>!!u),issueData:{code:h.invalid_arguments,argumentsError:l}})}function o(a,l){return Nn({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Rn(),tn].filter(u=>!!u),issueData:{code:h.invalid_return_type,returnTypeError:l}})}let i={errorMap:r.common.contextualErrorMap},s=r.data;return this._def.returns instanceof xt?ne(async(...a)=>{let l=new Ie([]),u=await this._def.args.parseAsync(a,i).catch(S=>{throw l.addIssue(n(a,S)),l}),d=await s(...u);return await this._def.returns._def.type.parseAsync(d,i).catch(S=>{throw l.addIssue(o(d,S)),l})}):ne((...a)=>{let l=this._def.args.safeParse(a,i);if(!l.success)throw new Ie([n(a,l.error)]);let u=s(...l.data),d=this._def.returns.safeParse(u,i);if(!d.success)throw new Ie([o(u,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Tt({...this._def,args:Se.create(e).rest(et.create())})}returns(e){return new Tt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Tt({args:e||Se.create([]).rest(et.create()),returns:r||et.create(),typeName:v.ZodFunction,...P(n)})}},Qt=class extends x{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Qt.create=(t,e)=>new Qt({getter:t,typeName:v.ZodLazy,...P(e)});var er=class extends x{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return y(r,{code:h.invalid_literal,expected:this._def.value}),T}return{status:"valid",value:e.data}}get value(){return this._def.value}};er.create=(t,e)=>new er({value:t,typeName:v.ZodLiteral,...P(e)});function ia(t,e){return new tr({values:t,typeName:v.ZodEnum,...P(e)})}var tr=class extends x{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return y(r,{expected:R.joinValues(n),received:r.parsedType,code:h.invalid_type}),T}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return y(r,{received:r.data,code:h.invalid_enum_value,options:n}),T}return ne(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}};tr.create=ia;var rr=class extends x{_parse(e){let r=R.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==_.string&&n.parsedType!==_.number){let o=R.objectValues(r);return y(n,{expected:R.joinValues(o),received:n.parsedType,code:h.invalid_type}),T}if(r.indexOf(e.data)===-1){let o=R.objectValues(r);return y(n,{received:n.data,code:h.invalid_enum_value,options:o}),T}return ne(e.data)}get enum(){return this._def.values}};rr.create=(t,e)=>new rr({values:t,typeName:v.ZodNativeEnum,...P(e)});var xt=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==_.promise&&r.common.async===!1)return y(r,{code:h.invalid_type,expected:_.promise,received:r.parsedType}),T;let n=r.parsedType===_.promise?r.data:Promise.resolve(r.data);return ne(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};xt.create=(t,e)=>new xt({type:t,typeName:v.ZodPromise,...P(e)});var pe=class extends x{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===v.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null;if(o.type==="preprocess"){let s=o.transform(n.data);return n.common.async?Promise.resolve(s).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}let i={addIssue:s=>{y(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="refinement"){let s=a=>{let l=o.refinement(a,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?T:(a.status==="dirty"&&r.dirty(),s(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?T:(a.status==="dirty"&&r.dirty(),s(a.value).then(()=>({status:r.value,value:a.value}))))}if(o.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Cn(s))return s;let a=o.transform(s.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Cn(s)?Promise.resolve(o.transform(s.value,i)).then(a=>({status:r.value,value:a})):s);R.assertNever(o)}};pe.create=(t,e,r)=>new pe({schema:t,typeName:v.ZodEffects,effect:e,...P(r)});pe.createWithPreprocess=(t,e,r)=>new pe({schema:e,effect:{type:"preprocess",transform:t},typeName:v.ZodEffects,...P(r)});var Ee=class extends x{_parse(e){return this._getType(e)===_.undefined?ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ee.create=(t,e)=>new Ee({innerType:t,typeName:v.ZodOptional,...P(e)});var nt=class extends x{_parse(e){return this._getType(e)===_.null?ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};nt.create=(t,e)=>new nt({innerType:t,typeName:v.ZodNullable,...P(e)});var nr=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===_.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};nr.create=(t,e)=>new nr({innerType:t,typeName:v.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...P(e)});var Cr=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.innerType._parse({data:r.data,path:r.path,parent:r});return On(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.defaultValue()})):{status:"valid",value:n.status==="valid"?n.value:this._def.defaultValue()}}removeDefault(){return this._def.innerType}};Cr.create=(t,e)=>new Cr({innerType:t,typeName:v.ZodCatch,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...P(e)});var Or=class extends x{_parse(e){if(this._getType(e)!==_.nan){let n=this._getOrReturnCtx(e);return y(n,{code:h.invalid_type,expected:_.nan,received:n.parsedType}),T}return{status:"valid",value:e.data}}};Or.create=t=>new Or({typeName:v.ZodNaN,...P(t)});var vu=Symbol("zod_brand"),An=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},or=class extends x{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?T:i.status==="dirty"?(r.dirty(),oa(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?T:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new or({in:e,out:r,typeName:v.ZodPipeline})}},sa=(t,e={},r)=>t?St.create().superRefine((n,o)=>{if(!t(n)){let i=typeof e=="function"?e(n):e,s=typeof i=="string"?{message:i}:i;o.addIssue({code:"custom",...s,fatal:r})}}):St.create(),Eu={object:G.lazycreate},v;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(v||(v={}));var Tu=(t,e={message:`Input not instance of ${t.name}`})=>sa(r=>r instanceof t,e,!0),aa=Re.create,ca=ze.create,Su=Or.create,xu=Jt.create,la=qt.create,ju=tt.create,Pu=wr.create,ku=Wt.create,wu=Vt.create,Iu=St.create,Ru=et.create,Nu=Ne.create,Cu=Ir.create,Ou=de.create,Du=G.create,Au=G.strictCreate,Mu=Zt.create,Gu=Rr.create,Uu=Kt.create,Lu=Se.create,Bu=Xt.create,$u=Nr.create,Fu=rt.create,zu=Tt.create,Hu=Qt.create,Yu=er.create,Ju=tr.create,qu=rr.create,Wu=xt.create,ra=pe.create,Vu=Ee.create,Zu=nt.create,Ku=pe.createWithPreprocess,Xu=or.create,Qu=()=>aa().optional(),ed=()=>ca().optional(),td=()=>la().optional(),rd={string:t=>Re.create({...t,coerce:!0}),number:t=>ze.create({...t,coerce:!0}),boolean:t=>qt.create({...t,coerce:!0}),bigint:t=>Jt.create({...t,coerce:!0}),date:t=>tt.create({...t,coerce:!0})},nd=T,c=Object.freeze({__proto__:null,defaultErrorMap:tn,setErrorMap:fu,getErrorMap:Rn,makeIssue:Nn,EMPTY_PATH:mu,addIssueToContext:y,ParseStatus:ee,INVALID:T,DIRTY:oa,OK:ne,isAborted:ci,isDirty:li,isValid:Cn,isAsync:On,get util(){return R},ZodParsedType:_,getParsedType:Et,ZodType:x,ZodString:Re,ZodNumber:ze,ZodBigInt:Jt,ZodBoolean:qt,ZodDate:tt,ZodSymbol:wr,ZodUndefined:Wt,ZodNull:Vt,ZodAny:St,ZodUnknown:et,ZodNever:Ne,ZodVoid:Ir,ZodArray:de,get objectUtil(){return Dn},ZodObject:G,ZodUnion:Zt,ZodDiscriminatedUnion:Rr,ZodIntersection:Kt,ZodTuple:Se,ZodRecord:Xt,ZodMap:Nr,ZodSet:rt,ZodFunction:Tt,ZodLazy:Qt,ZodLiteral:er,ZodEnum:tr,ZodNativeEnum:rr,ZodPromise:xt,ZodEffects:pe,ZodTransformer:pe,ZodOptional:Ee,ZodNullable:nt,ZodDefault:nr,ZodCatch:Cr,ZodNaN:Or,BRAND:vu,ZodBranded:An,ZodPipeline:or,custom:sa,Schema:x,ZodSchema:x,late:Eu,get ZodFirstPartyTypeKind(){return v},coerce:rd,any:Iu,array:Ou,bigint:xu,boolean:la,date:ju,discriminatedUnion:Gu,effect:ra,enum:Ju,function:zu,instanceof:Tu,intersection:Uu,lazy:Hu,literal:Yu,map:$u,nan:Su,nativeEnum:qu,never:Nu,null:wu,nullable:Zu,number:ca,object:Du,oboolean:td,onumber:ed,optional:Vu,ostring:Qu,pipeline:Xu,preprocess:Ku,promise:Wu,record:Bu,set:Fu,strictObject:Au,string:aa,symbol:Pu,transformer:ra,tuple:Lu,undefined:ku,union:Mu,unknown:Ru,void:Cu,NEVER:nd,ZodIssueCode:h,quotelessJson:pu,ZodError:Ie});var Ce=c.number(),Gn=c.string(),Un=c.string(),Oe=c.string(),di=c.string(),ua=c.string(),da=c.string(),pi=c.instanceof(window.File),Ln=c.enum(["start","end"]),fe=c.enum(["info","success","warning","error"]),rn=c.enum(["mac","pc"]),ir=c.object({left:c.number(),top:c.number()}).strict(),pa=c.object({clientX:c.number(),clientY:c.number()}).strict(),nn=c.object({width:c.number(),height:c.number()}).strict(),fi=c.object({dx:c.number(),dy:c.number()}).strict(),on=c.enum(["indigo","violet","purple","fuchsia","pink","rose","red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","gray"]),od=c.union([c.string(),c.number(),c.boolean(),c.null()]),Mn=c.lazy(()=>c.union([od,c.array(Mn),c.record(Mn)]));var jt=c.string().uuid(),sr="00000000-0000-0000-0000-000000000000";var sd=jt,Bn=c.object({id:sd}).strict();var Pt=jt,mi=Un,ad=c.string(),cd=c.enum(["free","pro"]),hi=c.object({id:cd,name:c.string(),layouts:c.number().nullable(),memos:c.number().nullable(),colors:c.boolean(),private_links:c.boolean(),db_analysis:c.boolean(),db_access:c.boolean()}).strict(),gi=c.object({id:Pt,slug:mi,name:ad,plan:hi,logo:c.string().url(),location:c.string().optional(),description:c.string().optional(),heroku:Bn.optional()}).strict();var _i=(t,e)=>t.reduce((r,n)=>{let o=e(n);return r[o]||(r[o]=[]),r[o].push(n),r},{});function $n(t,e,r){return JSON.stringify($(t,e,r))}function $(t,e,r){let n=e.safeParse(t);if(n.success)return n.data;{let o=n.error.issues.map(s=>fa(t,s)),i=n.error.issues.map(s=>ud(t,s));throw console.error(`invalid ${r}`,o.length>1?o:o[0],t),Error(`invalid ${r}${i.length>1?` (${i.length} errors)`:""}: ${i.join(", ")}`)}}function ud(t,e){return e.code===c.ZodIssueCode.unrecognized_keys?`at ${Dr(e.path)}: invalid additional key${e.keys.length>1?"s:":""} ${e.keys.map(r=>`'${r}' (${JSON.stringify(Y(t,e.path.concat(r)))})`).join(", ")}`:e.code===c.ZodIssueCode.invalid_type?`at ${Dr(e.path)}: expect '${e.expected}' but got '${e.received}' (${JSON.stringify(Y(t,e.path))})`:e.code===c.ZodIssueCode.invalid_literal?`at ${Dr(e.path)}: expect ${JSON.stringify(e.expected)} but got ${JSON.stringify(Y(t,e.path))}`:e.code===c.ZodIssueCode.invalid_enum_value?`at ${Dr(e.path)}: expect \`${e.options.map(r=>JSON.stringify(r)).join(" | ")}\` but got ${JSON.stringify(Y(t,e.path))}`:e.code===c.ZodIssueCode.invalid_union_discriminator?`at ${Dr(e.path)}: expect \`${e.options.map(r=>JSON.stringify(r)).join(" | ")}\` but got ${JSON.stringify(Y(t,e.path))}`:e.code===c.ZodIssueCode.invalid_union?`at ${Dr(e.path)}: invalid union for ${JSON.stringify(K(Y(t,e.path),2))}`:e.message}function Dr(t){return t.length===0?"_root_":`.${t.join(".")}`}function dd(t,e){return e.issues.map(r=>fa(t,r))}function fa(t,e){if(e.code===c.ZodIssueCode.invalid_type)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,expected:e.expected,received:e.received};if(e.code===c.ZodIssueCode.invalid_literal)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,expected:e.expected};if(e.code===c.ZodIssueCode.unrecognized_keys)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,keys:e.keys};if(e.code===c.ZodIssueCode.invalid_union)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,unionErrors:e.unionErrors.map(n=>dd(t,n))};if(e.code===c.ZodIssueCode.invalid_union_discriminator)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,options:e.options};if(e.code===c.ZodIssueCode.invalid_enum_value)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,options:e.options,received:e.received};if(e.code===c.ZodIssueCode.invalid_arguments)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,argumentsError:e.argumentsError};if(e.code===c.ZodIssueCode.invalid_return_type)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,returnTypeError:e.returnTypeError};if(e.code===c.ZodIssueCode.invalid_date)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message};if(e.code===c.ZodIssueCode.invalid_string)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,validation:e.validation};if(e.code===c.ZodIssueCode.too_small)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,type:e.type,minimum:e.minimum,inclusive:e.inclusive};if(e.code===c.ZodIssueCode.too_big)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,type:e.type,maximum:e.maximum,inclusive:e.inclusive};if(e.code===c.ZodIssueCode.invalid_intersection_types)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message};if(e.code===c.ZodIssueCode.not_multiple_of)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,multipleOf:e.multipleOf};if(e.code===c.ZodIssueCode.custom)return{code:e.code,path:e.path,value:K(Y(t,e.path),2),message:e.message,params:e.params};throw"Unhandled ZodIssue!"}function Y(t,e){if(e.length===0||t===void 0||t===null)return t;{let[r,...n]=e;return Y(t[r],n)}}function K(t,e){return Array.isArray(t)?e<=0?"?":(t.length>3?t.slice(0,3).concat(["..."]):t).map(r=>K(r,e-1)):t===null?t:typeof t=="object"?e<=0?"?":Object.fromEntries(Object.entries(t).map(([r,n])=>[r,K(n,e-1)])):typeof t=="string"&&t.length>30?t.substring(0,30)+"...":t}var ot=jt,zn=Un,Hn=c.string(),lr=jt,pd=c.string(),De=c.string(),cr=c.string(),Yn=c.string(),Jn=c.string(),it=c.string(),yi=c.string(),bi=c.union([c.string(),c.number(),c.boolean(),c.null(),Mn]),fd=c.string(),md=c.number(),hd=c.string(),gd=c.string(),_d=c.number(),ma=c.string(),yd=c.number(),ha=jt,bd=c.object({kind:c.literal("DatabaseConnection"),url:c.string()}).strict(),vd=c.object({kind:c.literal("SqlLocalFile"),name:c.string(),size:c.number(),modified:Ce}).strict(),Ed=c.object({kind:c.literal("SqlRemoteFile"),url:c.string(),size:c.number()}).strict(),Td=c.object({kind:c.literal("JsonLocalFile"),name:c.string(),size:c.number(),modified:Ce}).strict(),Sd=c.object({kind:c.literal("JsonRemoteFile"),url:c.string(),size:c.number()}).strict(),xd=c.object({kind:c.literal("AmlEditor")}).strict(),jd=c.discriminatedUnion("kind",[bd,vd,Ed,Td,Sd,xd]),vi=c.enum(["import-project","sql-source","json-source"]),st=c.object({id:lr,lines:md.array()}).strict(),ga=c.object({text:c.string(),origins:st.array().optional()}).strict(),_a=c.object({name:it,type:yi,nullable:c.boolean().optional(),default:c.string().optional(),comment:ga.optional(),columns:c.lazy(()=>_a.array().optional()),origins:st.array().optional()}).strict(),Pd=c.object({name:c.string().optional(),columns:it.array(),origins:st.array().optional()}).strict(),kd=c.object({name:c.string(),columns:it.array(),definition:c.string().optional(),origins:st.array().optional()}).strict(),wd=c.object({name:c.string(),columns:it.array(),definition:c.string().optional(),origins:st.array().optional()}).strict(),Id=c.object({name:c.string(),columns:it.array(),predicate:c.string().optional(),origins:st.array().optional()}).strict(),Rd=c.object({schema:cr,table:Yn,view:c.boolean().optional(),columns:_a.array(),primaryKey:Pd.optional(),uniques:kd.array().optional(),indexes:wd.array().optional(),checks:Id.array().optional(),comment:ga.optional(),origins:st.array().optional()}).strict(),Fn=c.object({table:De,column:it}).strict(),Nd=c.object({name:hd,src:Fn,ref:Fn,origins:st.array().optional()}).strict(),Cd=c.object({schema:cr,name:gd,value:c.union([c.object({enum:c.string().array()}).strict(),c.object({definition:c.string()}).strict()]),origins:st.array().optional()}).strict(),Od=c.object({id:lr,name:pd,kind:jd,content:fd.array(),tables:Rd.array(),relations:Nd.array(),types:Cd.array().optional(),enabled:c.boolean().optional(),fromSample:c.string().optional(),createdAt:Ce,updatedAt:Ce}).strict(),Dd=c.object({position:ir,zoom:yd}).strict(),Ad=c.object({id:De,position:ir,size:nn,color:on,columns:it.array(),selected:c.boolean().optional(),collapsed:c.boolean().optional(),hiddenColumns:c.boolean().optional()}).strict(),Md=c.object({id:_d,content:c.string(),position:ir,size:nn,color:on.optional()}).strict(),Gd=c.object({canvas:Dd,tables:Ad.array(),memos:Md.array().optional(),createdAt:Ce,updatedAt:Ce}).strict(),Ud=c.object({findPath:c.object({maxPathLength:c.number().optional(),ignoredTables:c.string().optional(),ignoredColumns:c.string().optional()}).strict().optional(),defaultSchema:cr.optional(),removedSchemas:cr.array().optional(),removeViews:c.boolean().optional(),removedTables:c.string().optional(),hiddenColumns:c.object({list:c.string().optional(),max:c.number().optional(),props:c.boolean().optional(),relations:c.boolean().optional()}).strict().optional(),columnOrder:c.enum(["sql","property","name","type"]).optional(),relationStyle:c.enum(["Bezier","Straight","Steps"]).optional(),columnBasicTypes:c.boolean().optional(),collapseTableColumns:c.boolean().optional()}).strict(),A=c.enum(["local","remote"]),Ar=c.enum(["none","read","write"]),qn=c.union([c.literal(1),c.literal(2)]),Ae=c.object({organization:gi.optional(),id:ot,slug:zn,name:Hn,description:c.string().optional(),sources:Od.array(),notes:c.record(c.string()).optional(),usedLayout:ma,layouts:c.record(ma,Gd),settings:Ud.optional(),storage:A,visibility:Ar,createdAt:Ce,updatedAt:Ce,version:qn}).strict(),ie=Ae.omit({organization:!0,id:!0,storage:!0,visibility:!0,createdAt:!0,updatedAt:!0}).extend({_type:c.literal("json")}).strict(),ya=c.object({nbSources:c.number(),nbTables:c.number(),nbColumns:c.number(),nbRelations:c.number(),nbTypes:c.number(),nbComments:c.number(),nbLayouts:c.number(),nbNotes:c.number(),nbMemos:c.number()}).strict(),ba=ya.extend({organization:gi.optional(),id:ot,slug:zn,name:Hn,description:c.string().optional(),storage:c.literal(A.enum.local),visibility:Ar,encodingVersion:qn,createdAt:Ce,updatedAt:Ce}).strict(),Ld=ba.omit({storage:!0}).extend({storage:c.literal(A.enum.remote)}).strict(),va=c.discriminatedUnion("storage",[ba,Ld]);function Ei(t){return t.storage===A.enum.local}function Wn(t){return t.storage===A.enum.remote}function Ti(t){let[e,r]=t.split(".");return r===void 0?{schema:"",table:e}:{schema:e,table:r}}function Si(t,n){var o=n,{_type:e}=o,r=Qe(o,["_type"]);return $(ae(re({},r),{id:t,slug:t,storage:A.enum.local,visibility:Ar.enum.none,createdAt:Date.now(),updatedAt:Date.now()}),Ae,"Project")}function Vn(t,n){var o=n,{_type:e}=o,r=Qe(o,["_type"]);return $(ae(re({},r),{organization:t.organization,id:t.id,storage:A.enum.local,visibility:Ar.enum.none,createdAt:t.createdAt,updatedAt:t.updatedAt}),Ae,"Project")}function Zn(t,n){var o=n,{_type:e}=o,r=Qe(o,["_type"]);return $(ae(re({},r),{organization:t.organization,id:t.id,slug:t.slug,storage:A.enum.remote,visibility:t.visibility,createdAt:t.createdAt,updatedAt:t.updatedAt}),Ae,"Project")}function kt(a){var l=a,{organization:t,id:e,storage:r,visibility:n,createdAt:o,updatedAt:i}=l,s=Qe(l,["organization","id","storage","visibility","createdAt","updatedAt"]);return $(ae(re({},s),{_type:"json"}),ie,"ProjectJson")}function Ea(t){let e=_i(t.sources.flatMap(n=>n.tables),n=>`${n.schema}.${n.table}`),r=_i(t.sources.flatMap(n=>n.types||[]),n=>`${n.schema}.${n.name}`);return $({nbSources:t.sources.length,nbTables:Object.keys(e).length,nbColumns:Object.values(e).map(n=>Math.max(...n.map(o=>o.columns.length))).reduce((n,o)=>n+o,0),nbRelations:t.sources.reduce((n,o)=>n+o.relations.length,0),nbTypes:Object.keys(r).length,nbComments:t.sources.flatMap(n=>n.tables.flatMap(o=>[o.comment].concat(o.columns.map(i=>i.comment)).filter(i=>!!i))).length,nbLayouts:Object.keys(t.layouts).length,nbNotes:Object.keys(t.notes||{}).length,nbMemos:Object.values(t.layouts).flatMap(n=>n.memos||[]).length},ya,"ProjectStats")}var Kn=c.object({schema:cr.nullable(),table:Yn,rows:c.number(),sample_values:c.record(bi)}).strict(),Xn=c.object({schema:cr.nullable(),table:Yn,column:it,type:yi,rows:c.number(),nulls:c.number(),cardinality:c.number(),common_values:c.object({value:bi,count:c.number()}).array()}).strict();var Bd=c.record(c.union([c.string(),c.number(),c.boolean(),c.null()])),Ta=c.object({name:c.string(),details:Bd.optional(),organization:Pt.optional(),project:ot.optional()}).strict();var $d=c.object({id:Oe,position:pa,size:nn,seeds:fi}).strict(),Fd=c.string(),zd=c.object({key:c.string(),ctrl:c.boolean(),shift:c.boolean(),alt:c.boolean(),target:c.object({id:c.string().nullable(),class:c.string().nullable(),tag:c.string().nullable()}).strict().nullable(),onInput:c.boolean(),preventDefault:c.boolean()}).strict(),Hd=c.object({kind:c.literal("Click"),id:Oe}).strict(),Yd=c.object({kind:c.literal("MouseDown"),id:Oe}).strict(),Jd=c.object({kind:c.literal("Focus"),id:Oe}).strict(),qd=c.object({kind:c.literal("Blur"),id:Oe}).strict(),Wd=c.object({kind:c.literal("ScrollTo"),id:Oe,position:Ln}).strict(),Vd=c.object({kind:c.literal("Fullscreen"),id:Oe.optional()}).strict(),Zd=c.object({kind:c.literal("SetMeta"),title:c.string().nullable(),description:c.string().nullable(),canonical:c.string().nullable(),html:c.string().nullable(),body:c.string().nullable()}).strict(),Kd=c.object({kind:c.literal("AutofocusWithin"),id:Oe}).strict(),Xd=c.object({kind:c.literal("Toast"),level:fe,message:c.string()}).strict(),Qd=c.object({kind:c.literal("GetProject"),organization:Pt,project:ot,token:ha.nullable()}).strict(),ep=c.object({kind:c.literal("CreateProjectTmp"),project:Ae}).strict(),tp=c.object({kind:c.literal("UpdateProjectTmp"),project:Ae}).strict(),rp=c.object({kind:c.literal("CreateProject"),organization:Pt,storage:A,project:Ae}).strict(),np=c.object({kind:c.literal("UpdateProject"),project:Ae}).strict(),op=c.object({kind:c.literal("MoveProjectTo"),project:Ae,storage:A}).strict(),ip=c.object({kind:c.literal("DeleteProject"),project:va,redirect:c.string().nullable()}).strict(),sp=c.object({kind:c.literal("ProjectDirty"),dirty:c.boolean()}).strict(),ap=c.object({kind:c.literal("DownloadFile"),filename:ua,content:da}).strict(),cp=c.object({kind:c.literal("GetLocalFile"),sourceKind:vi,file:pi}).strict(),lp=c.object({kind:c.literal("GetTableStats"),source:lr,database:di,table:De}).strict(),up=c.object({kind:c.literal("GetColumnStats"),source:lr,database:di,column:Fn}).strict(),dp=c.object({kind:c.literal("ObserveSizes"),ids:Oe.array()}).strict(),pp=c.object({kind:c.literal("ListenKeys"),keys:c.record(Fd,zd.array())}).strict(),fp=c.object({kind:c.literal("Confetti"),id:Oe}).strict(),mp=c.object({kind:c.literal("ConfettiPride")}).strict(),hp=c.object({kind:c.literal("Fireworks")}).strict(),gp=c.object({kind:c.literal("Track"),event:Ta}).strict(),Sa=c.discriminatedUnion("kind",[Hd,Yd,Jd,qd,Wd,Vd,Zd,Kd,Xd,Qd,ep,tp,rp,np,op,ip,sp,ap,cp,lp,up,dp,pp,fp,mp,hp,gp]),_p=c.object({kind:c.literal("GotSizes"),sizes:$d.array()}).strict(),yp=c.object({kind:c.literal("GotProject"),project:Ae.optional()}).strict(),bp=c.object({kind:c.literal("ProjectDeleted"),id:ot}).strict(),vp=c.object({kind:c.literal("GotLocalFile"),sourceKind:vi,file:pi,content:c.string()}).strict(),Ep=c.object({kind:c.literal("GotTableStats"),source:lr,stats:Kn}).strict(),Tp=c.object({kind:c.literal("GotColumnStats"),source:lr,stats:Xn}).strict(),Sp=c.object({kind:c.literal("GotHotkey"),id:c.string()}).strict(),xp=c.object({kind:c.literal("GotKeyHold"),key:c.string(),start:c.boolean()}).strict(),jp=c.object({kind:c.literal("GotToast"),level:fe,message:c.string()}).strict(),Pp=c.object({kind:c.literal("GotTableShow"),id:De,position:ir.optional()}).strict(),kp=c.object({kind:c.literal("GotTableHide"),id:De}).strict(),wp=c.object({kind:c.literal("GotTableToggleColumns"),id:De}).strict(),Ip=c.object({kind:c.literal("GotTablePosition"),id:De,position:ir}).strict(),Rp=c.object({kind:c.literal("GotTableMove"),id:De,delta:fi}).strict(),Np=c.object({kind:c.literal("GotTableSelect"),id:De}).strict(),Cp=c.object({kind:c.literal("GotTableColor"),id:De,color:on}).strict(),Op=c.object({kind:c.literal("GotColumnShow"),ref:Jn}).strict(),Dp=c.object({kind:c.literal("GotColumnHide"),ref:Jn}).strict(),Ap=c.object({kind:c.literal("GotColumnMove"),ref:Jn,index:c.number()}).strict(),Mp=c.object({kind:c.literal("GotFitToScreen")}).strict(),Gp=c.object({kind:c.literal("Error"),message:c.string()}).strict(),xa=c.discriminatedUnion("kind",[_p,yp,bp,vp,Ep,Tp,Sp,xp,jp,Pp,kp,wp,Ip,Rp,Np,Cp,Op,Dp,Ap,Mp,Gp]);function at(t){return t instanceof Error?t.message:typeof t=="string"?t:typeof t=="object"&&t.json&&typeof t.json.message=="string"?t.json.message:typeof t=="object"&&t&&typeof t.statusCode=="number"&&typeof t.message=="string"?t.message:JSON.stringify(t)}var Mr=class{constructor(e,r){this.elm=e;this.logger=r;this.callbacks={Click:[],MouseDown:[],Focus:[],Blur:[],ScrollTo:[],Fullscreen:[],SetMeta:[],AutofocusWithin:[],Toast:[],GetProject:[],CreateProjectTmp:[],UpdateProjectTmp:[],CreateProject:[],UpdateProject:[],MoveProjectTo:[],DeleteProject:[],ProjectDirty:[],DownloadFile:[],GetLocalFile:[],GetTableStats:[],GetColumnStats:[],ObserveSizes:[],ListenKeys:[],Confetti:[],ConfettiPride:[],Fireworks:[],Track:[]};this.on=(e,r)=>{this.callbacks[e].push(r)};this.noListeners=()=>Object.keys(this.callbacks).filter(e=>this.callbacks[e].length===0);this.updateSizes=e=>this.send({kind:"GotSizes",sizes:e});this.gotProject=e=>{window.azimutt.project=e,e?this.send({kind:"GotProject",project:e}):this.send({kind:"GotProject"})};this.dropProject=e=>this.send({kind:"ProjectDeleted",id:e});this.gotLocalFile=(e,r)=>this.send({kind:"GotLocalFile",sourceKind:e.sourceKind,file:e.file,content:r});this.gotTableStats=(e,r)=>this.send({kind:"GotTableStats",source:e,stats:r});this.gotColumnStats=(e,r)=>this.send({kind:"GotColumnStats",source:e,stats:r});this.gotHotkey=e=>this.send({kind:"GotHotkey",id:e.id});this.gotKeyHold=(e,r)=>this.send({kind:"GotKeyHold",key:e,start:r});this.toast=(e,r)=>this.send({kind:"GotToast",level:e,message:r});this.showTable=(e,r)=>this.send({kind:"GotTableShow",id:e,position:r});this.hideTable=e=>this.send({kind:"GotTableHide",id:e});this.toggleTableColumns=e=>this.send({kind:"GotTableToggleColumns",id:e});this.setTablePosition=(e,r)=>this.send({kind:"GotTablePosition",id:e,position:r});this.moveTable=(e,r)=>this.send({kind:"GotTableMove",id:e,delta:r});this.selectTable=e=>this.send({kind:"GotTableSelect",id:e});this.setTableColor=(e,r)=>this.send({kind:"GotTableColor",id:e,color:r});this.showColumn=e=>this.send({kind:"GotColumnShow",ref:e});this.hideColumn=e=>this.send({kind:"GotColumnHide",ref:e});this.moveColumn=(e,r)=>this.send({kind:"GotColumnMove",ref:e,index:r});this.fitToScreen=()=>this.send({kind:"GotFitToScreen"});var n;(n=this.elm.ports)==null||n.elmToJs.subscribe(o=>{this.logger.debug("ElmMsg",o);try{let i=$(o,Sa,`ElmMsg[${o.kind}]`);setTimeout(()=>{let s=this.callbacks[i.kind];s.length>0?s.map(a=>a(i)):r.error(`Message "${i.kind}" not handled`,i)},100)}catch(i){this.toast(fe.enum.error,at(i))}})}static init(e,r){return new Mr(window.Elm.Main.init({flags:e}),r)}send(e){var r;this.logger.debug("JsMsg",e);try{let n=$(e,xa,`JsMsg[${e.kind}]`);(r=this.elm.ports)==null||r.jsToElm.send(n)}catch(n){this.toast(fe.enum.error,at(n))}}};var Qn=class{constructor(e,r,n=void 0){this.app=e;this.logger=r;this.project=n;this.getAllTables=()=>{var r,n,o;let e=(((n=(r=this.project)==null?void 0:r.settings)==null?void 0:n.removedTables)||"").split(",").map(i=>i.trim()).filter(i=>i.length>0);return((o=this.project)==null?void 0:o.sources.filter(i=>i.enabled!==!1).flatMap(i=>i.tables).filter(i=>!e.find(s=>i.table===s||new RegExp(s).test(i.table))))||[]};this.getAllRelations=()=>{var e;return((e=this.project)==null?void 0:e.sources.filter(r=>r.enabled!==!1).flatMap(r=>r.relations))||[]};this.getVisibleTables=()=>{var r,n;let e=this.getAllTables().reduce((o,i)=>ae(re({},o),{[`${i.schema}.${i.table}`]:i}),{});return(n=this.project)==null?void 0:n.layouts[(r=this.project)==null?void 0:r.usedLayout].tables.map(o=>e[o.id]).filter(o=>o!==void 0)};this.showTable=(e,r,n)=>this.app.showTable(e,typeof r=="number"&&typeof n=="number"?{left:r,top:n}:void 0);this.hideTable=e=>this.app.hideTable(e);this.toggleTableColumns=e=>this.app.toggleTableColumns(e);this.moveTableTo=(e,r,n)=>this.app.setTablePosition(e,{left:r,top:n});this.moveTable=(e,r,n)=>this.app.moveTable(e,{dx:r,dy:n});this.selectTable=e=>this.app.selectTable(e);this.setTableColor=(e,r)=>this.app.setTableColor(e,r);this.showColumn=e=>this.app.showColumn(e);this.hideColumn=e=>this.app.hideColumn(e);this.moveColumn=(e,r)=>this.app.moveColumn(e,r);this.fitToScreen=()=>this.app.fitToScreen();this.help=()=>this.logger.info(`Hi! Welcome in the hackable world! \u{1F4BB}\uFE0F\u{1F913}
We are just trying out this, so if you use it and it's helpful, please let us know. Also, if you need more feature like this, don't hesitate to ask.

Here are a few tips:
 - \`tableId\` is the "schema.table" of a table, but if schema is "public", you can omit it. Basically, what you see in table header.
 - \`columnRef\` is similar to \`tableId\` but with the column name appended. For example "users.id" or "audit.logs.time".

\u26A0\uFE0F This is not a stable interface, just a toy to experiment. If you start using it heavily, let us know so we can define something more stable.`)}};var xe=c.enum(["dev","staging","prod"]);function ja(){return window.location.hostname.endsWith("localhost")?xe.enum.dev:window.location.hostname.endsWith("azimutt.dev")?xe.enum.staging:xe.enum.prod}var eo=class{error(...e){throw"Not implemented"}warn(...e){throw"Not implemented"}info(...e){throw"Not implemented"}log(...e){throw"Not implemented"}debug(...e){throw"Not implemented"}disableDebug(){return new xi(this,Gr.enum.debug)}},to=class extends eo{constructor(r){super();this.env=r}error(...r){console.error(...r)}warn(...r){console.warn(...r)}info(...r){console.info(...r)}log(...r){console.log(...r)}debug(...r){this.env!==xe.enum.prod&&console.debug(...r)}},Gr=c.enum(["error","warn","info","log","debug"]),xi=class extends eo{constructor(r,n){super();this.underlying=r;this.disabled=n}error(...r){this.disabled!==Gr.enum.error&&this.underlying.error(...r)}warn(...r){this.disabled!==Gr.enum.warn&&this.underlying.warn(...r)}info(...r){this.disabled!==Gr.enum.info&&this.underlying.info(...r)}log(...r){this.disabled!==Gr.enum.log&&this.underlying.log(...r)}debug(...r){this.disabled!==Gr.enum.debug&&this.underlying.debug(...r)}};function Pa(){String.prototype.includes||(String.prototype.includes=function(e,r){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return r===void 0&&(r=0),this.indexOf(e,r)!==-1}),crypto.randomUUID||(crypto.randomUUID=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))});let t=console.log;console.log=(...e)=>{let r=e[0];typeof r=="string"&&r.startsWith("[elm-time")?r.startsWith("[elm-time-end]")?console.timeEnd(r.slice(15,-4)):console.time(r.slice(11,-4)):t(...e)}}var ji={};(function t(e,r,n,o){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL);function s(){}function a(m){var p=r.exports.Promise,D=p!==void 0?p:e.Promise;return typeof D=="function"?new D(m):(m(s,s),null)}var l=function(){var m=Math.floor(16.666666666666668),p,D,N={},U=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(p=function(M){var C=Math.random();return N[C]=requestAnimationFrame(function O(H){U===H||U+m-1<H?(U=H,delete N[C],M()):N[C]=requestAnimationFrame(O)}),C},D=function(M){N[M]&&cancelAnimationFrame(N[M])}):(p=function(M){return setTimeout(M,m)},D=function(M){return clearTimeout(M)}),{frame:p,cancel:D}}(),u=function(){var m,p,D={};function N(U){function M(C,O){U.postMessage({options:C||{},callback:O})}U.init=function(O){var H=O.transferControlToOffscreen();U.postMessage({canvas:H},[H])},U.fire=function(O,H,Xe){if(p)return M(O,null),p;var L=Math.random().toString(36).slice(2);return p=a(function(we){function ve(B){B.data.callback===L&&(delete D[L],U.removeEventListener("message",ve),p=null,Xe(),we())}U.addEventListener("message",ve),M(O,L),D[L]=ve.bind(null,{data:{callback:L}})}),p},U.reset=function(){U.postMessage({reset:!0});for(var O in D)D[O](),delete D[O]}}return function(){if(m)return m;if(!n&&i){var U=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{m=new Worker(URL.createObjectURL(new Blob([U])))}catch(M){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("\u{1F38A} Could not load worker",M),null}N(m)}return m}}(),d={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(m,p){return p?p(m):m}function S(m){return m!=null}function E(m,p,D){return g(m&&S(m[p])?m[p]:d[p],D)}function Ft(m){return m<0?0:Math.floor(m)}function ri(m,p){return Math.floor(Math.random()*(p-m))+m}function jr(m){return parseInt(m,16)}function zt(m){return m.map(Fl)}function Fl(m){var p=String(m).replace(/[^0-9a-f]/gi,"");return p.length<6&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),{r:jr(p.substring(0,2)),g:jr(p.substring(2,4)),b:jr(p.substring(4,6))}}function zl(m){var p=E(m,"origin",Object);return p.x=E(p,"x",Number),p.y=E(p,"y",Number),p}function Hl(m){m.width=document.documentElement.clientWidth,m.height=document.documentElement.clientHeight}function Yl(m){var p=m.getBoundingClientRect();m.width=p.width,m.height=p.height}function Jl(m){var p=document.createElement("canvas");return p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=m,p}function ql(m,p,D,N,U,M,C,O,H){m.save(),m.translate(p,D),m.rotate(M),m.scale(N,U),m.arc(0,0,1,C,O,H),m.restore()}function Wl(m){var p=m.angle*(Math.PI/180),D=m.spread*(Math.PI/180);return{x:m.x,y:m.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:m.startVelocity*.5+Math.random()*m.startVelocity,angle2D:-p+(.5*D-Math.random()*D),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:m.color,shape:m.shape,tick:0,totalTicks:m.ticks,decay:m.decay,drift:m.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:m.gravity*3,ovalScalar:.6,scalar:m.scalar}}function Vl(m,p){p.x+=Math.cos(p.angle2D)*p.velocity+p.drift,p.y+=Math.sin(p.angle2D)*p.velocity+p.gravity,p.wobble+=p.wobbleSpeed,p.velocity*=p.decay,p.tiltAngle+=.1,p.tiltSin=Math.sin(p.tiltAngle),p.tiltCos=Math.cos(p.tiltAngle),p.random=Math.random()+2,p.wobbleX=p.x+10*p.scalar*Math.cos(p.wobble),p.wobbleY=p.y+10*p.scalar*Math.sin(p.wobble);var D=p.tick++/p.totalTicks,N=p.x+p.random*p.tiltCos,U=p.y+p.random*p.tiltSin,M=p.wobbleX+p.random*p.tiltCos,C=p.wobbleY+p.random*p.tiltSin;if(m.fillStyle="rgba("+p.color.r+", "+p.color.g+", "+p.color.b+", "+(1-D)+")",m.beginPath(),p.shape==="circle")m.ellipse?m.ellipse(p.x,p.y,Math.abs(M-N)*p.ovalScalar,Math.abs(C-U)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI):ql(m,p.x,p.y,Math.abs(M-N)*p.ovalScalar,Math.abs(C-U)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI);else if(p.shape==="star")for(var O=Math.PI/2*3,H=4*p.scalar,Xe=8*p.scalar,L=p.x,we=p.y,ve=5,B=Math.PI/ve;ve--;)L=p.x+Math.cos(O)*Xe,we=p.y+Math.sin(O)*Xe,m.lineTo(L,we),O+=B,L=p.x+Math.cos(O)*H,we=p.y+Math.sin(O)*H,m.lineTo(L,we),O+=B;else m.moveTo(Math.floor(p.x),Math.floor(p.y)),m.lineTo(Math.floor(p.wobbleX),Math.floor(U)),m.lineTo(Math.floor(M),Math.floor(C)),m.lineTo(Math.floor(N),Math.floor(p.wobbleY));return m.closePath(),m.fill(),p.tick<p.totalTicks}function Zl(m,p,D,N,U){var M=p.slice(),C=m.getContext("2d"),O,H,Xe=a(function(L){function we(){O=H=null,C.clearRect(0,0,N.width,N.height),U(),L()}function ve(){n&&!(N.width===o.width&&N.height===o.height)&&(N.width=m.width=o.width,N.height=m.height=o.height),!N.width&&!N.height&&(D(m),N.width=m.width,N.height=m.height),C.clearRect(0,0,N.width,N.height),M=M.filter(function(B){return Vl(C,B)}),M.length?O=l.frame(ve):we()}O=l.frame(ve),H=we});return{addFettis:function(L){return M=M.concat(L),Xe},canvas:m,promise:Xe,reset:function(){O&&l.cancel(O),H&&H()}}}function Ys(m,p){var D=!m,N=!!E(p||{},"resize"),U=E(p,"disableForReducedMotion",Boolean),M=i&&!!E(p||{},"useWorker"),C=M?u():null,O=D?Hl:Yl,H=m&&C?!!m.__confetti_initialized:!1,Xe=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,L;function we(B,oi,ii){for(var Pr=E(B,"particleCount",Ft),jn=E(B,"angle",Number),Pn=E(B,"spread",Number),Ht=E(B,"startVelocity",Number),Kl=E(B,"decay",Number),Xl=E(B,"gravity",Number),Ql=E(B,"drift",Number),qs=E(B,"colors",zt),eu=E(B,"ticks",Number),Ws=E(B,"shapes"),tu=E(B,"scalar"),Vs=zl(B),Zs=Pr,si=[],ru=m.width*Vs.x,nu=m.height*Vs.y;Zs--;)si.push(Wl({x:ru,y:nu,angle:jn,spread:Pn,startVelocity:Ht,color:qs[Zs%qs.length],shape:Ws[ri(0,Ws.length)],ticks:eu,decay:Kl,gravity:Xl,drift:Ql,scalar:tu}));return L?L.addFettis(si):(L=Zl(m,si,O,oi,ii),L.promise)}function ve(B){var oi=U||E(B,"disableForReducedMotion",Boolean),ii=E(B,"zIndex",Number);if(oi&&Xe)return a(function(Ht){Ht()});D&&L?m=L.canvas:D&&!m&&(m=Jl(ii),document.body.appendChild(m)),N&&!H&&O(m);var Pr={width:m.width,height:m.height};C&&!H&&C.init(m),H=!0,C&&(m.__confetti_initialized=!0);function jn(){if(C){var Ht={getBoundingClientRect:function(){if(!D)return m.getBoundingClientRect()}};O(Ht),C.postMessage({resize:{width:Ht.width,height:Ht.height}});return}Pr.width=Pr.height=null}function Pn(){L=null,N&&e.removeEventListener("resize",jn),D&&m&&(document.body.removeChild(m),m=null,H=!1)}return N&&e.addEventListener("resize",jn,!1),C?C.fire(B,Pr,Pn):we(B,Pr,Pn)}return ve.reset=function(){C&&C.reset(),L&&L.reset()},ve}var ni;function Js(){return ni||(ni=Ys(null,{useWorker:!0,resize:!0})),ni}r.exports=function(){return Js().apply(this,arguments)},r.exports.reset=function(){Js().reset()},r.exports.create=Ys})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ji,!1);var Ur=ji.exports,Z_=ji.exports.create;var te={getPlatform(){return window.navigator.userAgent.indexOf("Mac OS X")!==-1?rn.enum.mac:rn.enum.pc},randomId(){return crypto.randomUUID()},getElementById(t){let e=document.getElementById(t);if(e)return e;throw new Error(`Can't find element with id '${t}'`)},maybeElementById(t){let e=document.getElementById(t);return e?[e]:[]},getParents(t){let e=[t],r=t.parentElement;for(;r;)e.push(r),r=r.parentElement;return e},findParent(t,e){return e(t)?t:t.parentElement?te.findParent(t.parentElement,e):void 0},fullscreen(t){let e=t?te.getElementById(t):document.body;return(e.requestFullscreen?e.requestFullscreen():Promise.reject(new Error("requestFullscreen not available"))).catch(n=>{var o;return(o=window.open(window.location.href,"_blank"))==null?void 0:o.focus()})},downloadFile(t,e){let r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},launchConfetti(t){let e=document.getElementById(t);if(!e){console.warn(`Didn't found ${t} to launch confetti`);return}let r=e.getBoundingClientRect(),n=(r.left+r.right)/2,o=50+(r.top+r.bottom)/2;Ur({particleCount:100,spread:70,origin:{x:n/window.innerWidth,y:o/window.innerHeight},disableForReducedMotion:!0})},launchConfettiPride(){let t=Date.now()+3e3,e=["#28BEC9","#0C4F9C"];(function r(){Ur({particleCount:2,angle:60,spread:55,origin:{x:0},colors:e,zIndex:2e4}),Ur({particleCount:2,angle:120,spread:55,origin:{x:1},colors:e,zIndex:2e4}),Date.now()<t&&requestAnimationFrame(r)})()},launchFireworks(){let e=Date.now()+3e3,r={startVelocity:30,spread:360,ticks:60,zIndex:10001},n=(i,s)=>Math.random()*(s-i)+i,o=setInterval(()=>{let i=e-Date.now();if(i<=0)return clearInterval(o);let s=100*(i/3e3);Ur(Object.assign({},r,{particleCount:s,origin:{x:n(.1,.3),y:Math.random()-.2}})),Ur(Object.assign({},r,{particleCount:s,origin:{x:n(.7,.9),y:Math.random()-.2}}))},250)}};var ct=class{constructor(e,r){this.db=e;this.logger=r;this.kind="indexedDb";this.loadProject=e=>(this.logger.debug(`indexedDb.loadProject(${e})`),this.openStore("readonly").then(r=>this.getProject(r,e)).then(r=>r||Promise.reject("Not found")));this.createProject=(e,r)=>(this.logger.debug(`indexedDb.createProject(${e})`,r),this.openStore("readwrite").then(n=>this.getProject(n,e).then(o=>o?Promise.reject(`Project ${e} already exists in ${this.kind}`):Pi(n.add(ae(re({},$(r,ie,"ProjectJson")),{id:e}))).then(i=>r))));this.updateProject=(e,r)=>(this.logger.debug(`indexedDb.updateProject(${e})`,r),this.openStore("readwrite").then(n=>this.getProject(n,e).then(o=>o?Pi(n.put(ae(re({},$(r,ie,"ProjectJson")),{id:e}))).then(i=>r):Promise.reject(`Project ${e} doesn't exists in ${this.kind}`))));this.deleteProject=e=>(this.logger.debug(`indexedDb.deleteProject(${e})`),this.openStore("readwrite").then(r=>Pi(r.delete(e))))}static init(e){return window.indexedDB?new Promise((r,n)=>{let o=window.indexedDB.open(ct.databaseName,ct.databaseVersion);o.onerror=i=>n("Unable to open indexedDB"),o.onsuccess=i=>r(new ct(i.target.result,e)),o.onupgradeneeded=i=>{let s=i.target.result;s.objectStoreNames.contains(ct.dbProjects)||s.createObjectStore(ct.dbProjects,{keyPath:"id"})}}):Promise.reject("indexedDB not available")}openStore(e){return new Promise(r=>r(this.db.transaction(ct.dbProjects,e).objectStore(ct.dbProjects)))}getProject(e,r){return new Promise((n,o)=>{e.get(r).onsuccess=i=>{try{n($(Up(i.target.result),ie.optional(),"ProjectJson?"))}catch(s){o(s)}},e.onerror=i=>o(`Unable to load project: ${i}`)})}},ur=ct;ur.databaseName="azimutt",ur.databaseVersion=1,ur.dbProjects="projects";function Up(t){if(typeof t=="object"&&t!==null){let e=t,{id:r}=e;return Qe(e,["id"])}else return t}function Pi(t){return new Promise((e,r)=>{t.onerror=n=>r(t.error),t.onsuccess=n=>e(t.result)})}function wt(t){try{return JSON.parse(t)}catch(e){let r=(t==null?void 0:t.length)>20?t.slice(0,20)+"...":t;throw`${JSON.stringify(r)} is not a valid JSON (${at(e)})`}}var Lr=class{constructor(e){this.logger=e;this.kind="localStorage";this.prefix="project-";this.loadProject=e=>(this.logger.debug(`localStorage.loadProject(${e})`),Promise.resolve(this.getProject(this.idToKey(e))).then(r=>r||Promise.reject("Not found")));this.createProject=(e,r)=>{this.logger.debug(`localStorage.createProject(${e})`,r);let n=this.idToKey(e);return window.localStorage.getItem(n)===null?this.setProject(n,r):Promise.reject(`Project ${e} already exists in ${this.kind}`)};this.updateProject=(e,r)=>{this.logger.debug(`localStorage.updateProject(${e})`,r);let n=this.idToKey(e);return window.localStorage.getItem(n)===null?Promise.reject(`Project ${e} doesn't exists in ${this.kind}`):this.setProject(n,r)};this.deleteProject=e=>(this.logger.debug(`localStorage.deleteProject(${e})`),window.localStorage.removeItem(this.idToKey(e)),Promise.resolve());this.idToKey=e=>this.prefix+e;this.getProject=e=>{let r=window.localStorage.getItem(e);if(r===null)return Promise.reject(`Nothing in localStorage ${JSON.stringify(e)}`);try{return Promise.resolve($(wt(r),ie,"ProjectJson"))}catch(n){return Promise.reject(`Invalid JSON in localStorage ${JSON.stringify(e)}: ${at(n)}`)}};this.setProject=(e,r)=>{try{return window.localStorage.setItem(e,$n(r,ie,"ProjectJson")),Promise.resolve(r)}catch(n){return Promise.reject(n)}}}static init(e){return window.localStorage?Promise.resolve(new Lr(e)):Promise.reject("localStorage not available")}};var ro=class{constructor(e,r={}){this.logger=e;this.projects=r;this.kind="inMemory";this.loadProject=e=>(this.logger.debug(`inMemory.loadProject(${e})`),this.projects[e]?Promise.resolve($(this.projects[e],ie,"ProjectJson")):Promise.reject("Not found"));this.createProject=(e,r)=>(this.logger.debug(`inMemory.createProject(${e})`,r),this.projects[e]?Promise.reject(`Project ${e} already exists in ${this.kind}`):(this.projects[e]=$(r,ie,"ProjectJson"),Promise.resolve(r)));this.updateProject=(e,r)=>(this.logger.debug(`inMemory.updateProject(${e})`,r),this.projects[e]?(this.projects[e]=$(r,ie,"ProjectJson"),Promise.resolve(r)):Promise.reject(`Project ${e} doesn't exists in ${this.kind}`));this.deleteProject=e=>(this.logger.debug(`inMemory.deleteProject(${e})`),delete this.projects[e],Promise.resolve())}};function ka(t){return t.reduce((e,r)=>e.then(n=>r.then(o=>n.concat([o])).catch(o=>n)),Promise.resolve([]))}var no=class{constructor(e){this.logger=e;this.kind="manager";this.getProject=e=>(this.logger.debug(`storage.getProject(${e})`),this.indexedDb.then(r=>r.loadProject(e)).catch(r=>r==="Not found"?this.localStorage.then(n=>n.loadProject(e)):Promise.reject(r)).catch(r=>r==="Not found"?this.inMemory.loadProject(e):Promise.reject(r)).catch(r=>Promise.reject(r==="Not found"?`Not found project ${e}`:r)));this.createProject=(e,r)=>(this.logger.debug(`storage.createProject(${e})`,r),this.indexedDb.catch(n=>this.localStorage).catch(n=>this.inMemory).then(n=>n.createProject(e,r)).then(n=>{}));this.updateProject=(e,r)=>(this.logger.debug(`storage.updateProject(${e})`,r),this.indexedDb.catch(n=>this.localStorage).catch(n=>this.inMemory).then(n=>n.updateProject(e,r)).then(n=>{}));this.deleteProject=e=>(this.logger.debug(`storage.deleteProject(${e})`),ka([this.indexedDb.then(r=>r.deleteProject(e)),this.localStorage.then(r=>r.deleteProject(e)),this.inMemory.deleteProject(e)]).then(r=>{}));this.indexedDb=ur.init(e.disableDebug()),this.localStorage=Lr.init(e.disableDebug()),this.inMemory=new ro(e.disableDebug())}};var wa=(t,e,r)=>fetch(t,{credentials:"include"}).then(wi(e,r)),oo=(t,e,r,n)=>Da("POST",t,e,r,n),Ia=(t,e)=>Lp("POST",t,e),Ra=(t,e,r,n)=>Aa("POST",t,e,r,n),Na=(t,e,r,n)=>Da("PUT",t,e,r,n),Ca=(t,e,r,n)=>Aa("PUT",t,e,r,n),Oa=t=>fetch(t,{method:"DELETE",credentials:"include"}).then(Ma);function Da(t,e,r,n,o){return fetch(e,{method:t,credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then(wi(n,o))}function Lp(t,e,r){return fetch(e,{method:t,credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then(Ma)}function Aa(t,e,r,n,o){return fetch(e,{method:t,credentials:"include",body:r}).then(wi(n,o))}var wi=(t,e)=>r=>r.ok?r.text().then(n=>$(wt(n),t,e)):r.text().then(n=>Promise.reject(wt(n))),Ma=t=>t.ok?Promise.resolve():t.text().then(e=>Promise.reject(wt(e)));var Eo=du(fc());var vo=class{constructor(e,r){this.env=e;this.logger=r;this.projects={};this.loginUrl=e=>e?`/login/redirect?url=${encodeURIComponent(e)}`:"/login";this.getProject=(e,r,n)=>Yt(this,null,function*(){this.logger.debug(`backend.getProject(${e}, ${r}, ${n})`);let o=yield this.fetchProject(e,r,n);return o.storage===A.enum.remote&&(this.projects[r]=o.content),o});this.fetchProject=(e,r,n)=>{let o=n?`token=${n}&`:"",i=this.withXhrHost(`/api/v1/organizations/${e}/projects/${r}?${o}expand=organization,organization.plan,content`);return wa(i,lm,"ProjectWithContentResponse").then(fm)};this.createProjectLocal=(e,r)=>{this.logger.debug(`backend.createProjectLocal(${e})`,r);let n=this.withXhrHost(`/api/v1/organizations/${e}/projects?expand=organization,organization.plan`);return oo(n,bo(r,A.enum.local),cn,"ProjectResponse").then(ln).then(o=>Ei(o)?o:Promise.reject("Expecting a local project"))};this.createProjectRemote=(e,r)=>Yt(this,null,function*(){this.logger.debug(`backend.createProjectRemote(${e})`,r);let n=this.withXhrHost(`/api/v1/organizations/${e}/projects?expand=organization,organization.plan`),o=new FormData;Object.entries(bo(r,A.enum.remote)).filter(([s,a])=>a!=null).map(([s,a])=>o.append(s,typeof a=="string"?a:JSON.stringify(a))),o.append("file",new Blob([mc(r)],{type:"application/json"}),`${r.name}.json`);let i=yield Ra(n,o,cn,"ProjectResponse").then(ln);return this.projects[i.id]=r,Wn(i)?i:Promise.reject("Expecting a remote project")});this.updateProjectLocal=e=>{var o;if(this.logger.debug(`backend.updateProjectLocal(${(o=e.organization)==null?void 0:o.id}, ${e.id})`,e),!e.organization)return Promise.reject("Expecting an organization to update project");if(e.storage!==A.enum.local)return Promise.reject("Expecting a local project");let r=this.withXhrHost(`/api/v1/organizations/${e.organization.id}/projects/${e.id}?expand=organization,organization.plan`),n=kt(e);return Na(r,bo(n,A.enum.local),cn,"ProjectResponse").then(ln).then(i=>Ei(i)?i:Promise.reject("Expecting a local project"))};this.updateProjectRemote=e=>Yt(this,null,function*(){var l;if(this.logger.debug(`backend.updateProjectRemote(${(l=e.organization)==null?void 0:l.id}, ${e.id})`,e),!e.organization)return Promise.reject("Expecting an organization to update project");if(e.storage!==A.enum.remote)return Promise.reject("Expecting a remote project");let r=this.projects[e.id],n=yield this.fetchProject(e.organization.id,e.id,null).then(u=>Wn(u)?u:Promise.reject("Expecting a remote project")),o=kt(e);if(n.updatedAt!==e.updatedAt)try{let u=Eo.diff(r,o);o=Eo.patch(u,n.content)}catch(u){return console.warn("patch failed",u),Promise.reject("already updated by someone else, please reload")}if(!e.organization)return Promise.reject("Expecting an organization to update project");let i=this.withXhrHost(`/api/v1/organizations/${e.organization.id}/projects/${e.id}?expand=organization,organization.plan`),s=new FormData;Object.entries(bo(o,A.enum.remote)).filter(([u,d])=>d!=null).map(([u,d])=>s.append(u,typeof d=="string"?d:JSON.stringify(d))),s.append("file",new Blob([mc(o)],{type:"application/json"}),`${e.organization.id}-${e.name}.json`);let a=yield Ca(i,s,cn,"ProjectResponse").then(ln);return this.projects[e.id]=o,Wn(a)?a:Promise.reject("Expecting a remote project")});this.deleteProject=(e,r)=>Yt(this,null,function*(){this.logger.debug(`backend.deleteProject(${e}, ${r})`);let n=this.withXhrHost(`/api/v1/organizations/${e}/projects/${r}`);yield Oa(n),delete this.projects[r]});this.getTableStats=(e,r)=>Yt(this,null,function*(){this.logger.debug(`backend.getTableStats(${e}, ${r})`);let{schema:n,table:o}=Ti(r),i=this.withXhrHost("/api/v1/analyzer/stats");return oo(i,{url:e,schema:n,table:o},Kn,"TableStats")});this.getColumnStats=(e,r)=>Yt(this,null,function*(){this.logger.debug(`backend.getColumnStats(${e}, ${JSON.stringify(r)})`);let{schema:n,table:o}=Ti(r.table),i=this.withXhrHost("/api/v1/analyzer/stats");return oo(i,{url:e,schema:n,table:o,column:r.column},Xn,"ColumnStats")});this.trackEvent=e=>{this.logger.debug(`backend.trackEvent(${JSON.stringify(e)})`);let r=this.withXhrHost("/api/v1/events");Ia(r,e).then(n=>{})}}withXhrHost(e){return this.env==xe.enum.dev?`${e}`:this.env==xe.enum.staging?`https://azimutt.dev${e}`:`https://azimutt.app${e}`}},am=c.object({nb_sources:c.number(),nb_tables:c.number(),nb_columns:c.number(),nb_relations:c.number(),nb_types:c.number(),nb_comments:c.number(),nb_layouts:c.number(),nb_notes:c.number(),nb_memos:c.number()}).strict(),cm=c.object({id:Pt,slug:mi,name:c.string(),plan:hi,logo:c.string(),location:c.string().nullable(),description:c.string().nullable(),heroku:Bn.optional()}).strict(),cn=am.extend({organization:cm,id:ot,slug:zn,name:Hn,description:c.string().nullable(),encoding_version:qn,storage_kind:A,visibility:Ar,created_at:Gn,updated_at:Gn,archived_at:Gn.nullable()}).strict(),lm=cn.extend({content:c.string().optional()}).strict();function um(t){return{nbSources:t.nb_sources,nbTables:t.nb_tables,nbColumns:t.nb_columns,nbRelations:t.nb_relations,nbTypes:t.nb_types,nbComments:t.nb_comments,nbLayouts:t.nb_layouts,nbNotes:t.nb_notes,nbMemos:t.nb_memos}}function dm(t){return{nb_sources:t.nbSources,nb_tables:t.nbTables,nb_columns:t.nbColumns,nb_relations:t.nbRelations,nb_types:t.nbTypes,nb_comments:t.nbComments,nb_layouts:t.nbLayouts,nb_notes:t.nbNotes,nb_memos:t.nbMemos}}function bo(t,e){return re({name:t.name,description:void 0,storage_kind:e,encoding_version:t.version},dm(Ea(t)))}function pm(t){return{id:t.id,slug:t.slug,name:t.name,plan:t.plan,logo:t.logo,location:t.location||void 0,description:t.description||void 0,heroku:t.heroku}}function ln(t){return re({organization:pm(t.organization),id:t.id,slug:t.slug,name:t.name,description:t.description||void 0,encodingVersion:t.encoding_version,storage:t.storage_kind,visibility:t.visibility,createdAt:new Date(t.created_at).getTime(),updatedAt:new Date(t.updated_at).getTime()},um(t))}function fm(t){let e=ln(t);return e.storage===A.enum.remote?ae(re({},e),{content:mm(t.content)}):e}function mc(t){return $n(t,ie,"ProjectJson")}function mm(t){if(typeof t=="string")return $(wt(t),ie,"ProjectJson");throw"Missing content in backend response!"}var hc=t=>t.pathname+t.search+t.hash;var gc=Object.prototype.toString;function un(t){switch(gc.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return se(t,Error)}}function Hr(t,e){return gc.call(t)===`[object ${e}]`}function dn(t){return Hr(t,"ErrorEvent")}function To(t){return Hr(t,"DOMError")}function Yi(t){return Hr(t,"DOMException")}function le(t){return Hr(t,"String")}function Yr(t){return t===null||typeof t!="object"&&typeof t!="function"}function Me(t){return Hr(t,"Object")}function Jr(t){return typeof Event<"u"&&se(t,Event)}function Ji(t){return typeof Element<"u"&&se(t,Element)}function qi(t){return Hr(t,"RegExp")}function pr(t){return Boolean(t&&t.then&&typeof t.then=="function")}function Wi(t){return Me(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function pn(t){return typeof t=="number"&&t!==t}function se(t,e){try{return t instanceof e}catch{return!1}}function So(t){return t&&t.Math==Math?t:void 0}var X=typeof globalThis=="object"&&So(globalThis)||typeof window=="object"&&So(window)||typeof self=="object"&&So(self)||typeof global=="object"&&So(global)||function(){return this}()||{};function ut(){return X}function fr(t,e,r){let n=r||X,o=n.__SENTRY__=n.__SENTRY__||{};return o[t]||(o[t]=e())}var xo=ut(),gm=80;function dt(t,e={}){try{let r=t,n=5,o=[],i=0,s=0,a=" > ",l=a.length,u,d=Array.isArray(e)?e:e.keyAttrs,g=!Array.isArray(e)&&e.maxStringLength||gm;for(;r&&i++<n&&(u=_m(r,d),!(u==="html"||i>1&&s+o.length*l+u.length>=g));)o.push(u),s+=u.length,r=r.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function _m(t,e){let r=t,n=[],o,i,s,a,l;if(!r||!r.tagName)return"";n.push(r.tagName.toLowerCase());let u=e&&e.length?e.filter(g=>r.getAttribute(g)).map(g=>[g,r.getAttribute(g)]):null;if(u&&u.length)u.forEach(g=>{n.push(`[${g[0]}="${g[1]}"]`)});else if(r.id&&n.push(`#${r.id}`),o=r.className,o&&le(o))for(i=o.split(/\s+/),l=0;l<i.length;l++)n.push(`.${i[l]}`);let d=["type","name","title","alt"];for(l=0;l<d.length;l++)s=d[l],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}function Vi(){try{return xo.document.location.href}catch{return""}}function Zi(t){return xo.document&&xo.document.querySelector?xo.document.querySelector(t):null}var z=class extends Error{constructor(e,r="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=r}};var ym=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function bm(t){return t==="http"||t==="https"}function Rt(t,e=!1){let{host:r,path:n,pass:o,port:i,projectId:s,protocol:a,publicKey:l}=t;return`${a}://${l}${e&&o?`:${o}`:""}@${r}${i?`:${i}`:""}/${n&&`${n}/`}${s}`}function _c(t){let e=ym.exec(t);if(!e)throw new z(`Invalid Sentry Dsn: ${t}`);let[r,n,o="",i,s="",a]=e.slice(1),l="",u=a,d=u.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),u=d.pop()),u){let g=u.match(/^\d+/);g&&(u=g[0])}return yc({host:i,pass:o,path:l,projectId:u,port:s,protocol:r,publicKey:n})}function yc(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function vm(t){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;let{port:e,projectId:r,protocol:n}=t;if(["protocol","publicKey","host","projectId"].forEach(i=>{if(!t[i])throw new z(`Invalid Sentry Dsn: ${i} missing`)}),!r.match(/^\d+$/))throw new z(`Invalid Sentry Dsn: Invalid projectId ${r}`);if(!bm(n))throw new z(`Invalid Sentry Dsn: Invalid protocol ${n}`);if(e&&isNaN(parseInt(e,10)))throw new z(`Invalid Sentry Dsn: Invalid port ${e}`);return!0}function jo(t){let e=typeof t=="string"?_c(t):yc(t);return vm(e),e}var Em="Sentry Logger ",qr=["debug","info","warn","error","log","assert","trace"];function Po(t){if(!("console"in X))return t();let e=X.console,r={};qr.forEach(n=>{let o=e[n]&&e[n].__sentry_original__;n in e&&o&&(r[n]=e[n],e[n]=o)});try{return t()}finally{Object.keys(r).forEach(n=>{e[n]=r[n]})}}function bc(){let t=!1,e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?qr.forEach(r=>{e[r]=(...n)=>{t&&Po(()=>{X.console[r](`${Em}[${r}]:`,...n)})}}):qr.forEach(r=>{e[r]=()=>{}}),e}var f;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?f=fr("logger",bc):f=bc();function Nt(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.substr(0,e)}...`}function ko(t,e){if(!Array.isArray(t))return"";let r=[];for(let n=0;n<t.length;n++){let o=t[n];try{r.push(String(o))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function vc(t,e,r=!1){return le(t)?qi(e)?e.test(t):le(e)?r?t===e:t.includes(e):!1:!1}function mr(t,e=[],r=!1){return e.some(n=>vc(t,n,r))}function V(t,e,r){if(!(e in t))return;let n=t[e],o=r(n);if(typeof o=="function")try{wo(o,n)}catch{}t[e]=o}function Wr(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}function wo(t,e){let r=e.prototype||{};t.prototype=e.prototype=r,Wr(t,"__sentry_original__",e)}function hr(t){return t.__sentry_original__}function Xi(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function Io(t){if(un(t))return{message:t.message,name:t.name,stack:t.stack,...Tc(t)};if(Jr(t)){let e={type:t.type,target:Ec(t.target),currentTarget:Ec(t.currentTarget),...Tc(t)};return typeof CustomEvent<"u"&&se(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Ec(t){try{return Ji(t)?dt(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Tc(t){if(typeof t=="object"&&t!==null){let e={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function Qi(t,e=40){let r=Object.keys(Io(t));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=e)return Nt(r[0],e);for(let n=r.length;n>0;n--){let o=r.slice(0,n).join(", ");if(!(o.length>e))return n===r.length?o:Nt(o,e)}return""}function me(t){return Ki(t,new Map)}function Ki(t,e){if(Me(t)){let r=e.get(t);if(r!==void 0)return r;let n={};e.set(t,n);for(let o of Object.keys(t))typeof t[o]<"u"&&(n[o]=Ki(t[o],e));return n}if(Array.isArray(t)){let r=e.get(t);if(r!==void 0)return r;let n=[];return e.set(t,n),t.forEach(o=>{n.push(Ki(o,e))}),n}return t}function he(t,e){return t??e()}function gr(t){let e,r=t[0],n=1;for(;n<t.length;){let o=t[n],i=t[n+1];if(n+=2,(o==="optionalAccess"||o==="optionalCall")&&r==null)return;o==="access"||o==="optionalAccess"?(e=r,r=i(r)):(o==="call"||o==="optionalCall")&&(r=i((...s)=>r.call(e,...s)),e=void 0)}return r}var Tm=50;function Ro(...t){let e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0)=>{let o=[];for(let i of r.split(`
`).slice(n)){let s=i.replace(/\(error: (.*)\)/,"$1");for(let a of e){let l=a(s);if(l){o.push(l);break}}}return Sc(o)}}function ts(t){return Array.isArray(t)?Ro(...t):t}function Sc(t){if(!t.length)return[];let e=t,r=e[0].function||"",n=e[e.length-1].function||"";return(r.indexOf("captureMessage")!==-1||r.indexOf("captureException")!==-1)&&(e=e.slice(1)),n.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,Tm).map(o=>({...o,filename:o.filename||e[0].filename,function:o.function||"?"})).reverse()}var es="<anonymous>";function je(t){try{return!t||typeof t!="function"?es:t.name||es}catch{return es}}var _r=ut();function No(){if(!("fetch"in _r))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function fn(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function rs(){if(!No())return!1;if(fn(_r.fetch))return!0;let t=!1,e=_r.document;if(e&&typeof e.createElement=="function")try{let r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=fn(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function ns(){let t=_r.chrome,e=t&&t.app&&t.app.runtime,r="history"in _r&&!!_r.history.pushState&&!!_r.history.replaceState;return!e&&r}var F=ut(),mn={},xc={};function Sm(t){if(!xc[t])switch(xc[t]=!0,t){case"console":xm();break;case"dom":Om();break;case"xhr":wm();break;case"fetch":jm();break;case"history":Im();break;case"error":Dm();break;case"unhandledrejection":Am();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("unknown instrumentation type:",t);return}}function W(t,e){mn[t]=mn[t]||[],mn[t].push(e),Sm(t)}function Ge(t,e){if(!(!t||!mn[t]))for(let r of mn[t]||[])try{r(e)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${je(r)}
Error:`,n)}}function xm(){"console"in F&&qr.forEach(function(t){t in F.console&&V(F.console,t,function(e){return function(...r){Ge("console",{args:r,level:t}),e&&e.apply(F.console,r)}})})}function jm(){rs()&&V(F,"fetch",function(t){return function(...e){let r={args:e,fetchData:{method:Pm(e),url:km(e)},startTimestamp:Date.now()};return Ge("fetch",{...r}),t.apply(F,e).then(n=>(Ge("fetch",{...r,endTimestamp:Date.now(),response:n}),n),n=>{throw Ge("fetch",{...r,endTimestamp:Date.now(),error:n}),n})}})}function Pm(t=[]){return"Request"in F&&se(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function km(t=[]){return typeof t[0]=="string"?t[0]:"Request"in F&&se(t[0],Request)?t[0].url:String(t[0])}function wm(){if(!("XMLHttpRequest"in F))return;let t=XMLHttpRequest.prototype;V(t,"open",function(e){return function(...r){let n=this,o=r[1],i=n.__sentry_xhr__={method:le(r[0])?r[0].toUpperCase():r[0],url:r[1]};le(o)&&i.method==="POST"&&o.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let s=function(){if(n.readyState===4){try{i.status_code=n.status}catch{}Ge("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?V(n,"onreadystatechange",function(a){return function(...l){return s(),a.apply(n,l)}}):n.addEventListener("readystatechange",s),e.apply(n,r)}}),V(t,"send",function(e){return function(...r){return this.__sentry_xhr__&&r[0]!==void 0&&(this.__sentry_xhr__.body=r[0]),Ge("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),e.apply(this,r)}})}var Co;function Im(){if(!ns())return;let t=F.onpopstate;F.onpopstate=function(...r){let n=F.location.href,o=Co;if(Co=n,Ge("history",{from:o,to:n}),t)try{return t.apply(this,r)}catch{}};function e(r){return function(...n){let o=n.length>2?n[2]:void 0;if(o){let i=Co,s=String(o);Co=s,Ge("history",{from:i,to:s})}return r.apply(this,n)}}V(F.history,"pushState",e),V(F.history,"replaceState",e)}var Rm=1e3,Oo,Do;function Nm(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function Cm(t){if(t.type!=="keypress")return!1;try{let e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function jc(t,e=!1){return r=>{if(!r||Do===r||Cm(r))return;let n=r.type==="keypress"?"input":r.type;Oo===void 0?(t({event:r,name:n,global:e}),Do=r):Nm(Do,r)&&(t({event:r,name:n,global:e}),Do=r),clearTimeout(Oo),Oo=F.setTimeout(()=>{Oo=void 0},Rm)}}function Om(){if(!("document"in F))return;let t=Ge.bind(null,"dom"),e=jc(t,!0);F.document.addEventListener("click",e,!1),F.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{let n=F[r]&&F[r].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(V(n,"addEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let l=this,u=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){let g=jc(t);d.handler=g,o.call(this,i,g,a)}d.refCount++}catch{}return o.call(this,i,s,a)}}),V(n,"removeEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let l=this,u=l.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(o.call(this,i,d.handler,a),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,s,a)}}))})}var os=null;function Dm(){os=F.onerror,F.onerror=function(t,e,r,n,o){return Ge("error",{column:n,error:o,line:r,msg:t,url:e}),os?os.apply(this,arguments):!1}}var is=null;function Am(){is=F.onunhandledrejection,F.onunhandledrejection=function(t){return Ge("unhandledrejection",t),is?is.apply(this,arguments):!0}}function Pc(){let t=typeof WeakSet=="function",e=t?new WeakSet:[];function r(o){if(t)return e.has(o)?!0:(e.add(o),!1);for(let i=0;i<e.length;i++)if(e[i]===o)return!0;return e.push(o),!1}function n(o){if(t)e.delete(o);else for(let i=0;i<e.length;i++)if(e[i]===o){e.splice(i,1);break}}return[r,n]}function ge(){let t=X,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");let r=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(r()&15)>>n/4).toString(16))}function kc(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Je(t){let{message:e,event_id:r}=t;if(e)return e;let n=kc(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function Vr(t,e,r){let n=t.exception=t.exception||{},o=n.values=n.values||[],i=o[0]=o[0]||{};i.value||(i.value=e||""),i.type||(i.type=r||"Error")}function pt(t,e){let r=kc(t);if(!r)return;let n={type:"generic",handled:!0},o=r.mechanism;if(r.mechanism={...n,...o,...e},e&&"data"in e){let i={...o&&o.data,...e.data};r.mechanism.data=i}}function Ao(t){if(t&&t.__sentry_captured__)return!0;try{Wr(t,"__sentry_captured__",!0)}catch{}return!1}function hn(t){return Array.isArray(t)?t:[t]}function wc(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function yr(){return!wc()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Ue(t,e){return t.require(e)}function ss(t){let e;try{e=Ue(module,t)}catch{}try{let{cwd:r}=Ue(module,"process");e=Ue(module,`${r()}/node_modules/${t}`)}catch{}return e}function Le(t,e=1/0,r=1/0){try{return Mo("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function Go(t,e=3,r=100*1024){let n=Le(t,e);return Um(n)>r?Go(t,e-1,r):n}function Mo(t,e,r=1/0,n=1/0,o=Pc()){let[i,s]=o;if(e===null||["number","boolean","string"].includes(typeof e)&&!pn(e))return e;let a=Mm(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;if(r===0)return a.replace("object ","");if(i(e))return"[Circular ~]";let l=e;if(l&&typeof l.toJSON=="function")try{let S=l.toJSON();return Mo("",S,r-1,n,o)}catch{}let u=Array.isArray(e)?[]:{},d=0,g=Io(e);for(let S in g){if(!Object.prototype.hasOwnProperty.call(g,S))continue;if(d>=n){u[S]="[MaxProperties ~]";break}let E=g[S];u[S]=Mo(S,E,r-1,n,o),d++}return s(e),u}function Mm(t,e){try{return t==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":t==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&e===global?"[Global]":typeof window<"u"&&e===window?"[Window]":typeof document<"u"&&e===document?"[Document]":Wi(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?`[Function: ${je(e)}]`:typeof e=="symbol"?`[${String(e)}]`:typeof e=="bigint"?`[BigInt: ${String(e)}]`:`[object ${Object.getPrototypeOf(e).constructor.name}]`}catch(r){return`**non-serializable** (${r})`}}function Gm(t){return~-encodeURI(t).split(/%..|./).length}function Um(t){return Gm(JSON.stringify(t))}var ft;(function(t){t[t.PENDING=0]="PENDING";let r=1;t[t.RESOLVED=r]="RESOLVED";let n=2;t[t.REJECTED=n]="REJECTED"})(ft||(ft={}));function ue(t){return new J(e=>{e(t)})}function Ct(t){return new J((e,r)=>{r(t)})}var J=class{__init(){this._state=ft.PENDING}__init2(){this._handlers=[]}constructor(e){J.prototype.__init.call(this),J.prototype.__init2.call(this),J.prototype.__init3.call(this),J.prototype.__init4.call(this),J.prototype.__init5.call(this),J.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}then(e,r){return new J((n,o)=>{this._handlers.push([!1,i=>{if(!e)n(i);else try{n(e(i))}catch(s){o(s)}},i=>{if(!r)o(i);else try{n(r(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new J((r,n)=>{let o,i;return this.then(s=>{i=!1,o=s,e&&e()},s=>{i=!0,o=s,e&&e()}).then(()=>{if(i){n(o);return}r(o)})})}__init3(){this._resolve=e=>{this._setResult(ft.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(ft.REJECTED,e)}}__init5(){this._setResult=(e,r)=>{if(this._state===ft.PENDING){if(pr(r)){r.then(this._resolve,this._reject);return}this._state=e,this._value=r,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===ft.PENDING)return;let e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===ft.RESOLVED&&r[1](this._value),this._state===ft.REJECTED&&r[2](this._value),r[0]=!0)})}}};function as(t){let e=[];function r(){return t===void 0||e.length<t}function n(s){return e.splice(e.indexOf(s),1)[0]}function o(s){if(!r())return Ct(new z("Not adding Promise because buffer limit was reached."));let a=s();return e.indexOf(a)===-1&&e.push(a),a.then(()=>n(a)).then(null,()=>n(a).then(null,()=>{})),a}function i(s){return new J((a,l)=>{let u=e.length;if(!u)return a(!0);let d=setTimeout(()=>{s&&s>0&&a(!1)},s);e.forEach(g=>{ue(g).then(()=>{--u||(clearTimeout(d),a(!0))},l)})})}return{$:e,add:o,drain:i}}function gn(t){if(!t)return{};let e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};let r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+r+n}}var Ic=["fatal","error","warning","log","info","debug"];function cs(t){return t==="warn"?"warning":Ic.includes(t)?t:"log"}var Nc=ut(),us={nowSeconds:()=>Date.now()/1e3};function Lm(){let{performance:t}=Nc;if(!t||!t.now)return;let e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function Bm(){try{return Ue(module,"perf_hooks").performance}catch{return}}var ls=yr()?Bm():Lm(),Rc=ls===void 0?us:{nowSeconds:()=>(ls.timeOrigin+ls.now())/1e3},mt=us.nowSeconds.bind(us),br=Rc.nowSeconds.bind(Rc),Ot=br;var _n,vr=(()=>{let{performance:t}=Nc;if(!t||!t.now){_n="none";return}let e=3600*1e3,r=t.now(),n=Date.now(),o=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,i=o<e,s=t.timing&&t.timing.navigationStart,l=typeof s=="number"?Math.abs(s+r-n):e,u=l<e;return i||u?o<=l?(_n="timeOrigin",t.timeOrigin):(_n="navigationStart",s):(_n="dateNow",n)})();var Cc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ds(t){let e=t.match(Cc);if(!t||!e)return;let r;return e[3]==="1"?r=!0:e[3]==="0"&&(r=!1),{traceId:e[1],parentSampled:r,parentSpanId:e[2]}}function Dt(t,e=[]){return[t,e]}function fs(t,e){let[r,n]=t;return[r,[...n,e]]}function Uo(t,e){t[1].forEach(n=>{let o=n[0].type;e(n,o)})}function ps(t,e){return(e||new TextEncoder).encode(t)}function yn(t,e){let[r,n]=t,o=JSON.stringify(r);function i(s){typeof o=="string"?o=typeof s=="string"?o+s:[ps(o,e),s]:o.push(typeof s=="string"?ps(s,e):s)}for(let s of n){let[a,l]=s;if(i(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(Le(l))}i(u)}}return typeof o=="string"?o:$m(o)}function $m(t){let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}function ms(t,e){let r=typeof t.data=="string"?ps(t.data,e):t.data;return[me({type:"attachment",length:r.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),r]}var Fm={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay_event",replay_recording:"replay_recording"};function Lo(t){return Fm[t]}function Bo(t){if(!t||!t.sdk)return;let{name:e,version:r}=t.sdk;return{name:e,version:r}}function hs(t,e,r,n){let o=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&{dsn:Rt(n)},...t.type==="transaction"&&o&&{trace:me({...o})}}}function gs(t,e,r){let n=[{type:"client_report"},{timestamp:r||mt(),discarded_events:t}];return Dt(e?{dsn:e}:{},[n])}function Oc(t,e=Date.now()){let r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;let n=Date.parse(`${t}`);return isNaN(n)?6e4:n-e}function Dc(t,e){return t[e]||t.all||0}function _s(t,e,r=Date.now()){return Dc(t,e)>r}function ys(t,{statusCode:e,headers:r},n=Date.now()){let o={...t},i=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(i)for(let a of i.trim().split(",")){let[l,u]=a.split(":",2),d=parseInt(l,10),g=(isNaN(d)?60:d)*1e3;if(!u)o.all=n+g;else for(let S of u.split(";"))o[S]=n+g}else s?o.all=n+Oc(s,n):e===429&&(o.all=n+60*1e3);return o}var bn="baggage",bs="sentry-",Mc=/^sentry-/,Gc=8192;function vs(t){if(!le(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce((n,o)=>{let i=Ac(o);return{...n,...i}},{});else{if(!t)return;e=Ac(t)}let r=Object.entries(e).reduce((n,[o,i])=>{if(o.match(Mc)){let s=o.slice(bs.length);n[s]=i}return n},{});if(Object.keys(r).length>0)return r}function $o(t){let e=Object.entries(t).reduce((r,[n,o])=>(o&&(r[`${bs}${n}`]=o),r),{});return zm(e)}function Ac(t){return t.split(",").map(e=>e.split("=").map(r=>decodeURIComponent(r.trim()))).reduce((e,[r,n])=>(e[r]=n,e),{})}function zm(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[r,n],o)=>{let i=`${encodeURIComponent(r)}=${encodeURIComponent(n)}`,s=o===0?i:`${e},${i}`;return s.length>Gc?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Not adding key: ${r} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s},"")}function Uc(t){let e=br(),r={sid:ge(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Hm(r)};return t&&ht(r,t),r}function ht(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||br(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:ge()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{let r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Lc(t,e){let r={};e?r={status:e}:t.status==="ok"&&(r={status:"exited"}),ht(t,r)}function Hm(t){return me({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}var Ym=100,_e=class{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){let r=new _e;return e&&(r._breadcrumbs=[...e._breadcrumbs],r._tags={...e._tags},r._extra={...e._extra},r._contexts={...e._contexts},r._user=e._user,r._level=e._level,r._span=e._span,r._session=e._session,r._transactionName=e._transactionName,r._fingerprint=e._fingerprint,r._eventProcessors=[...e._eventProcessors],r._requestSession=e._requestSession,r._attachments=[...e._attachments],r._sdkProcessingMetadata={...e._sdkProcessingMetadata}),r}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ht(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){let r=e(this);return r instanceof _e?r:this}return e instanceof _e?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Me(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,r){let n=typeof r=="number"?r:Ym;if(n<=0)return this;let o={timestamp:mt(),...e};return this._breadcrumbs=[...this._breadcrumbs,o].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,r={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};let n=this._span.transaction&&this._span.transaction.name;n&&(e.tags={transaction:n,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Bc(),...this._eventProcessors],e,r)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,r,n,o=0){return new J((i,s)=>{let a=e[o];if(r===null||typeof a!="function")i(r);else{let l=a({...r},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&l===null&&f.log(`Event processor "${a.id}" dropped event`),pr(l)?l.then(u=>this._notifyEventProcessors(e,u,n,o+1).then(i)).then(null,s):this._notifyEventProcessors(e,l,n,o+1).then(i).then(null,s)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?hn(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}};function Bc(){return fr("globalEventProcessors",()=>[])}function Er(t){Bc().push(t)}var Ts=4,Jm=100,At=class{__init(){this._stack=[{}]}constructor(e,r=new _e,n=Ts){this._version=n,At.prototype.__init.call(this),this.getStackTop().scope=r,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){let r=this.getStackTop();r.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){let e=_e.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){let r=this.pushScope();try{e(r)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,r){let n=this._lastEventId=r&&r.event_id?r.event_id:ge(),o=new Error("Sentry syntheticException");return this._withClient((i,s)=>{i.captureException(e,{originalException:e,syntheticException:o,...r,event_id:n},s)}),n}captureMessage(e,r,n){let o=this._lastEventId=n&&n.event_id?n.event_id:ge(),i=new Error(e);return this._withClient((s,a)=>{s.captureMessage(e,r,{originalException:e,syntheticException:i,...n,event_id:o},a)}),o}captureEvent(e,r){let n=r&&r.event_id?r.event_id:ge();return e.type!=="transaction"&&(this._lastEventId=n),this._withClient((o,i)=>{o.captureEvent(e,{...r,event_id:n},i)}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,r){let{scope:n,client:o}=this.getStackTop();if(!n||!o)return;let{beforeBreadcrumb:i=null,maxBreadcrumbs:s=Jm}=o.getOptions&&o.getOptions()||{};if(s<=0)return;let l={timestamp:mt(),...e},u=i?Po(()=>i(l,r)):l;u!==null&&n.addBreadcrumb(u,s)}setUser(e){let r=this.getScope();r&&r.setUser(e)}setTags(e){let r=this.getScope();r&&r.setTags(e)}setExtras(e){let r=this.getScope();r&&r.setExtras(e)}setTag(e,r){let n=this.getScope();n&&n.setTag(e,r)}setExtra(e,r){let n=this.getScope();n&&n.setExtra(e,r)}setContext(e,r){let n=this.getScope();n&&n.setContext(e,r)}configureScope(e){let{scope:r,client:n}=this.getStackTop();r&&n&&e(r)}run(e){let r=Es(this);try{e(this)}finally{Es(r)}}getIntegration(e){let r=this.getClient();if(!r)return null;try{return r.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,r){return this._callExtensionMethod("startTransaction",e,r)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){let e=this.getStackTop(),r=e&&e.scope,n=r&&r.getSession();n&&Lc(n),this._sendSessionUpdate(),r&&r.setSession()}startSession(e){let{scope:r,client:n}=this.getStackTop(),{release:o,environment:i}=n&&n.getOptions()||{},{userAgent:s}=X.navigator||{},a=Uc({release:o,environment:i,...r&&{user:r.getUser()},...s&&{userAgent:s},...e});if(r){let l=r.getSession&&r.getSession();l&&l.status==="ok"&&ht(l,{status:"exited"}),this.endSession(),r.setSession(a)}return a}shouldSendDefaultPii(){let e=this.getClient(),r=e&&e.getOptions();return Boolean(r&&r.sendDefaultPii)}_sendSessionUpdate(){let{scope:e,client:r}=this.getStackTop();if(!e)return;let n=e.getSession();n&&r&&r.captureSession&&r.captureSession(n)}_withClient(e){let{scope:r,client:n}=this.getStackTop();n&&e(n,r)}_callExtensionMethod(e,...r){let o=Mt().__SENTRY__;if(o&&o.extensions&&typeof o.extensions[e]=="function")return o.extensions[e].apply(this,r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Extension method ${e} couldn't be found, doing nothing.`)}};function Mt(){return X.__SENTRY__=X.__SENTRY__||{extensions:{},hub:void 0},X}function Es(t){let e=Mt(),r=gt(e);return Fo(e,t),r}function I(){let t=Mt();return(!$c(t)||gt(t).isOlderThan(Ts))&&Fo(t,new At),yr()?qm(t):gt(t)}function qm(t){try{let e=Mt().__SENTRY__,r=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!r)return gt(t);if(!$c(r)||gt(r).isOlderThan(Ts)){let n=gt(t).getStackTop();Fo(r,new At(n.client,_e.clone(n.scope)))}return gt(r)}catch{return gt(t)}}function $c(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function gt(t){return fr("hub",()=>new At,t)}function Fo(t,e){if(!t)return!1;let r=t.__SENTRY__=t.__SENTRY__||{};return r.hub=e,!0}function Ss(t,e){return I().captureException(t,{captureContext:e})}function xs(t){I().withScope(t)}var Wm="7";function Vm(t){let e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Zm(t){return`${Vm(t)}${t.projectId}/envelope/`}function Km(t,e){return Xi({sentry_key:t.publicKey,sentry_version:Wm,...e&&{sentry_client:`${e.name}/${e.version}`}})}function vn(t,e={}){let r=typeof e=="string"?e:e.tunnel,n=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return r||`${Zm(t)}?${Km(t,n)}`}function Xm(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function Fc(t,e,r,n){let o=Bo(r),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!n&&{dsn:Rt(e)}},s="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t];return Dt(i,[s])}function zc(t,e,r,n){let o=Bo(r),i=t.type||"event";Xm(t,r&&r.sdk);let s=hs(t,o,n,e);return delete t.sdkProcessingMetadata,Dt(s,[[{type:i},t]])}var Hc=[];function Qm(t){let e={};return t.forEach(r=>{let{name:n}=r,o=e[n];o&&!o.isDefaultInstance&&r.isDefaultInstance||(e[n]=r)}),Object.values(e)}function js(t){let e=t.defaultIntegrations||[],r=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let n;Array.isArray(r)?n=[...e,...r]:typeof r=="function"?n=hn(r(e)):n=e;let o=Qm(n),i=o.findIndex(s=>s.name==="Debug");if(i!==-1){let[s]=o.splice(i,1);o.push(s)}return o}function Yc(t){let e={};return t.forEach(r=>{e[r.name]=r,Hc.indexOf(r.name)===-1&&(r.setupOnce(Er,I),Hc.push(r.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Integration installed: ${r.name}`))}),e}function Jc(t,e,r,n){let{normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=t,s={...e,event_id:e.event_id||r.event_id||ge(),timestamp:e.timestamp||mt()};eh(s,t),th(s,t.integrations.map(u=>u.name));let a=n;r.captureContext&&(a=_e.clone(a).update(r.captureContext));let l=ue(s);if(a){if(a.getAttachments){let u=[...r.attachments||[],...a.getAttachments()];u.length&&(r.attachments=u)}l=a.applyToEvent(s,r)}return l.then(u=>typeof o=="number"&&o>0?rh(u,o,i):u)}function eh(t,e){let{environment:r,release:n,dist:o,maxValueLength:i=250}=e;"environment"in t||(t.environment="environment"in e?r:"production"),t.release===void 0&&n!==void 0&&(t.release=n),t.dist===void 0&&o!==void 0&&(t.dist=o),t.message&&(t.message=Nt(t.message,i));let s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=Nt(s.value,i));let a=t.request;a&&a.url&&(a.url=Nt(a.url,i))}function th(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function rh(t,e,r){if(!t)return null;let n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(o=>({...o,...o.data&&{data:Le(o.data,e,r)}}))},...t.user&&{user:Le(t.user,e,r)},...t.contexts&&{contexts:Le(t.contexts,e,r)},...t.extra&&{extra:Le(t.extra,e,r)}};return t.contexts&&t.contexts.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=Le(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(o=>(o.data&&(o.data=Le(o.data,e,r)),o))),n}var qc="Not capturing exception because it's already been captured.",qe=class{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(qe.prototype.__init.call(this),qe.prototype.__init2.call(this),qe.prototype.__init3.call(this),qe.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=jo(e.dsn);let r=vn(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("No DSN provided, client will not do anything.")}captureException(e,r,n){if(Ao(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(qc);return}let o=r&&r.event_id;return this._process(this.eventFromException(e,r).then(i=>this._captureEvent(i,r,n)).then(i=>{o=i})),o}captureMessage(e,r,n,o){let i=n&&n.event_id,s=Yr(e)?this.eventFromMessage(String(e),r,n):this.eventFromException(e,n);return this._process(s.then(a=>this._captureEvent(a,n,o)).then(a=>{i=a})),i}captureEvent(e,r,n){if(r&&r.originalException&&Ao(r.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(qc);return}let o=r&&r.event_id;return this._process(this._captureEvent(e,r,n).then(i=>{o=i})),o}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ht(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){let r=this._transport;return r?this._isClientDoneProcessing(e).then(n=>r.flush(e).then(o=>n&&o)):ue(!0)}close(e){return this.flush(e).then(r=>(this.getOptions().enabled=!1,r))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Yc(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,r={}){if(this._dsn){let n=zc(e,this._dsn,this._options._metadata,this._options.tunnel);for(let o of r.attachments||[])n=fs(n,ms(o,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(n)}}sendSession(e){if(this._dsn){let r=Fc(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(r)}}recordDroppedEvent(e,r,n){if(this._options.sendClientReports){let o=`${e}:${r}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Adding outcome: "${o}"`),this._outcomes[o]=this._outcomes[o]+1||1}}_updateSessionFromEvent(e,r){let n=!1,o=!1,i=r.exception&&r.exception.values;if(i){o=!0;for(let l of i){let u=l.mechanism;if(u&&u.handled===!1){n=!0;break}}}let s=e.status==="ok";(s&&e.errors===0||s&&n)&&(ht(e,{...n&&{status:"crashed"},errors:e.errors||Number(o||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new J(r=>{let n=0,o=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),r(!0)):(n+=o,e&&n>=e&&(clearInterval(i),r(!1)))},o)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,r,n){let o=this.getOptions();return Jc(o,e,r,n)}_captureEvent(e,r={},n){return this._processEvent(e,r,n).then(o=>o.event_id,o=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){let i=o;i.logLevel==="log"?f.log(i.message):f.warn(i)}})}_processEvent(e,r,n){let o=this.getOptions(),{sampleRate:i}=o;if(!this._isEnabled())return Ct(new z("SDK not enabled, will not capture event.","log"));let s=Vc(e),a=Wc(e),l=e.type||"error",u=`before send for type \`${l}\``;return a&&typeof i=="number"&&Math.random()>i?(this.recordDroppedEvent("sample_rate","error",e),Ct(new z(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"))):this._prepareEvent(e,r,n).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",l,e),new z("An event processor returned `null`, will not send event.","log");if(r.data&&r.data.__sentry__===!0)return d;let S=oh(o,d,r);return nh(S,u)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",e.type||"error",e),new z(`${u} returned \`null\`, will not send event.`,"log");let g=n&&n.getSession();!s&&g&&this._updateSessionFromEvent(g,d);let S=d.transaction_info;if(s&&S&&d.transaction!==e.transaction){let E="custom";d.transaction_info={...S,source:E,changes:[...S.changes,{source:E,timestamp:d.timestamp,propagations:S.propagations}]}}return this.sendEvent(d,r),d}).then(null,d=>{throw d instanceof z?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new z(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(e){this._numProcessing++,e.then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,r=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Error while sending event:",r)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Transport disabled")}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.keys(e).map(r=>{let[n,o]=r.split(":");return{reason:n,category:o,quantity:e[r]}})}};function nh(t,e){let r=`${e} must return \`null\` or a valid event.`;if(pr(t))return t.then(n=>{if(!Me(n)&&n!==null)throw new z(r);return n},n=>{throw new z(`${e} rejected with ${n}`)});if(!Me(t)&&t!==null)throw new z(r);return t}function oh(t,e,r){let{beforeSend:n,beforeSendTransaction:o}=t;return Wc(e)&&n?n(e,r):Vc(e)&&o?o(e,r):e}function Wc(t){return t.type===void 0}function Vc(t){return t.type==="transaction"}function Ps(t,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?f.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));let r=I(),n=r.getScope();n&&n.update(e.initialScope);let o=new t(e);r.bindClient(o)}var ih=30;function En(t,e,r=as(t.bufferSize||ih)){let n={},o=s=>r.drain(s);function i(s){let a=[];if(Uo(s,(g,S)=>{let E=Lo(S);if(_s(n,E)){let Ft=Zc(g,S);t.recordDroppedEvent("ratelimit_backoff",E,Ft)}else a.push(g)}),a.length===0)return ue();let l=Dt(s[0],a),u=g=>{Uo(l,(S,E)=>{let Ft=Zc(S,E);t.recordDroppedEvent(g,Lo(E),Ft)})},d=()=>e({body:yn(l,t.textEncoder)}).then(g=>{g.statusCode!==void 0&&(g.statusCode<200||g.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Sentry responded with status code ${g.statusCode} to sent event.`),n=ys(n,g)},g=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Failed while sending event:",g),u("network_error")});return r.add(d).then(g=>g,g=>{if(g instanceof z)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Skipped sending event because buffer is full."),u("queue_overflow"),ue();throw g})}return{send:i,flush:o}}function Zc(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}var zo="7.29.0";var Tr={};Qs(Tr,{FunctionToString:()=>Gt,InboundFilters:()=>_t});var Kc,Gt=class{constructor(){Gt.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Gt.id}setupOnce(){Kc=Function.prototype.toString,Function.prototype.toString=function(...e){let r=hr(this)||this;return Kc.apply(r,e)}}};Gt.__initStatic();var sh=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],_t=class{static __initStatic(){this.id="InboundFilters"}__init(){this.name=_t.id}constructor(e={}){this._options=e,_t.prototype.__init.call(this)}setupOnce(e,r){let n=o=>{let i=r();if(i){let s=i.getIntegration(_t);if(s){let a=i.getClient(),l=a?a.getOptions():{},u=ah(s._options,l);return ch(o,u)?null:o}}return o};n.id=this.name,e(n)}};_t.__initStatic();function ah(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...sh],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function ch(t,e){return e.ignoreInternal&&fh(t)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to being internal Sentry Error.
Event: ${Je(t)}`),!0):lh(t,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Je(t)}`),!0):uh(t,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Je(t)}.
Url: ${Ho(t)}`),!0):dh(t,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Je(t)}.
Url: ${Ho(t)}`),!0)}function lh(t,e){return!e||!e.length?!1:ph(t).some(r=>mr(r,e))}function uh(t,e){if(!e||!e.length)return!1;let r=Ho(t);return r?mr(r,e):!1}function dh(t,e){if(!e||!e.length)return!0;let r=Ho(t);return r?mr(r,e):!0}function ph(t){if(t.message)return[t.message];if(t.exception)try{let{type:e="",value:r=""}=t.exception.values&&t.exception.values[0]||{};return[`${r}`,`${e}: ${r}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Cannot extract message for event ${Je(t)}`),[]}return[]}function fh(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function mh(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function Ho(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?mh(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Cannot extract url for event ${Je(t)}`),null}}var j=X,ks=0;function ws(){return ks>0}function gh(){ks++,setTimeout(()=>{ks--})}function Ut(t,e={},r){if(typeof t!="function")return t;try{let o=t.__sentry_wrapped__;if(o)return o;if(hr(t))return t}catch{return t}let n=function(){let o=Array.prototype.slice.call(arguments);try{r&&typeof r=="function"&&r.apply(this,arguments);let i=o.map(s=>Ut(s,e));return t.apply(this,i)}catch(i){throw gh(),xs(s=>{s.addEventProcessor(a=>(e.mechanism&&(Vr(a,void 0,void 0),pt(a,e.mechanism)),a.extra={...a.extra,arguments:o},a)),Ss(i)}),i}};try{for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}catch{}wo(n,t),Wr(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}function Ns(t,e){let r=Cs(t,e),n={type:e&&e.name,value:vh(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function _h(t,e,r,n){let i=I().getClient(),s=i&&i.getOptions().normalizeDepth,a={exception:{values:[{type:Jr(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:`Non-Error ${n?"promise rejection":"exception"} captured with keys: ${Qi(e)}`}]},extra:{__serialized__:Go(e,s)}};if(r){let l=Cs(t,r);l.length&&(a.exception.values[0].stacktrace={frames:l})}return a}function Is(t,e){return{exception:{values:[Ns(t,e)]}}}function Cs(t,e){let r=e.stacktrace||e.stack||"",n=bh(e);try{return t(r,n)}catch{}return[]}var yh=/Minified React error #\d+;/i;function bh(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(yh.test(t.message))return 1}return 0}function vh(t){let e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Xc(t,e,r,n){let o=r&&r.syntheticException||void 0,i=Yo(t,e,o,n);return pt(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),ue(i)}function Qc(t,e,r="info",n,o){let i=n&&n.syntheticException||void 0,s=Rs(t,e,i,o);return s.level=r,n&&n.event_id&&(s.event_id=n.event_id),ue(s)}function Yo(t,e,r,n,o){let i;if(dn(e)&&e.error)return Is(t,e.error);if(To(e)||Yi(e)){let s=e;if("stack"in e)i=Is(t,e);else{let a=s.name||(To(s)?"DOMError":"DOMException"),l=s.message?`${a}: ${s.message}`:a;i=Rs(t,l,r,n),Vr(i,l)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return un(e)?Is(t,e):Me(e)||Jr(e)?(i=_h(t,e,r,o),pt(i,{synthetic:!0}),i):(i=Rs(t,e,r,n),Vr(i,`${e}`,void 0),pt(i,{synthetic:!0}),i)}function Rs(t,e,r,n){let o={message:e};if(n&&r){let i=Cs(t,r);i.length&&(o.exception={values:[{value:e,stacktrace:{frames:i}}]})}return o}var Jo=1024,Os="Breadcrumbs",We=class{static __initStatic(){this.id=Os}__init(){this.name=We.id}constructor(e){We.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&W("console",Th),this.options.dom&&W("dom",Eh(this.options.dom)),this.options.xhr&&W("xhr",Sh),this.options.fetch&&W("fetch",xh),this.options.history&&W("history",jh)}addSentryBreadcrumb(e){this.options.sentry&&I().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:Je(e)},{event:e})}};We.__initStatic();function Eh(t){function e(r){let n,o=typeof t=="object"?t.serializeAttribute:void 0,i=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;i&&i>Jo&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`\`dom.maxStringLength\` cannot exceed ${Jo}, but a value of ${i} was configured. Sentry will use ${Jo} instead.`),i=Jo),typeof o=="string"&&(o=[o]);try{n=r.event.target?dt(r.event.target,{keyAttrs:o,maxStringLength:i}):dt(r.event,{keyAttrs:o,maxStringLength:i})}catch{n="<unknown>"}n.length!==0&&I().addBreadcrumb({category:`ui.${r.name}`,message:n},{event:r.event,name:r.name,global:r.global})}return e}function Th(t){for(let r=0;r<t.args.length;r++)if(t.args[r]==="ref=Ref<"){t.args[r+1]="viewRef";break}let e={category:"console",data:{arguments:t.args,logger:"console"},level:cs(t.level),message:ko(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message=`Assertion failed: ${ko(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1);else return;I().addBreadcrumb(e,{input:t.args,level:t.level})}function Sh(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;let{method:e,url:r,status_code:n,body:o}=t.xhr.__sentry_xhr__||{};I().addBreadcrumb({category:"xhr",data:{method:e,url:r,status_code:n},type:"http"},{xhr:t.xhr,input:o});return}}function xh(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"||(t.error?I().addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args}):I().addBreadcrumb({category:"fetch",data:{...t.fetchData,status_code:t.response.status},type:"http"},{input:t.args,response:t.response})))}function jh(t){let e=t.from,r=t.to,n=gn(j.location.href),o=gn(e),i=gn(r);o.path||(o=n),n.protocol===i.protocol&&n.host===i.host&&(r=i.relative),n.protocol===o.protocol&&n.host===o.host&&(e=o.relative),I().addBreadcrumb({category:"navigation",data:{from:e,to:r}})}var qo=class extends qe{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:zo}],version:zo},super(e),e.sendClientReports&&j.document&&j.document.addEventListener("visibilitychange",()=>{j.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,r){return Xc(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return Qc(this._options.stackParser,e,r,n,this._options.attachStacktrace)}sendEvent(e,r){let n=this.getIntegrationById(Os);gr([n,"optionalAccess",o=>o.addSentryBreadcrumb,"optionalCall",o=>o(e)]),super.sendEvent(e,r)}_prepareEvent(e,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n)}_flushOutcomes(){let e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Sending outcomes:",e);let r=vn(this._dsn,this._options),n=gs(e,this._options.tunnel&&Rt(this._dsn));try{Object.prototype.toString.call(j&&j.navigator)==="[object Navigator]"&&typeof j.navigator.sendBeacon=="function"&&!this._options.transportOptions?j.navigator.sendBeacon.bind(j.navigator)(r,yn(n)):this._sendEnvelope(n)}catch(o){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(o)}}};var Tn;function el(){if(Tn)return Tn;if(fn(j.fetch))return Tn=j.fetch.bind(j);let t=j.document,e=j.fetch;if(t&&typeof t.createElement=="function")try{let r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r);let n=r.contentWindow;n&&n.fetch&&(e=n.fetch),t.head.removeChild(r)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return Tn=e.bind(j)}function tl(){Tn=void 0}function rl(t,e=el()){function r(n){let o={body:n.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n.body.length<=65536,...t.fetchOptions};try{return e(t.url,o).then(i=>({statusCode:i.status,headers:{"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")}}))}catch(i){return tl(),Ct(i)}}return En(t,r)}var Ph=4;function nl(t){function e(r){return new J((n,o)=>{let i=new XMLHttpRequest;i.onerror=o,i.onreadystatechange=()=>{i.readyState===Ph&&n({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",t.url);for(let s in t.headers)Object.prototype.hasOwnProperty.call(t.headers,s)&&i.setRequestHeader(s,t.headers[s]);i.send(r.body)})}return En(t,e)}var Wo="?";var kh=30,wh=40,Ih=50;function Ds(t,e,r,n){let o={filename:t,function:e,in_app:!0};return r!==void 0&&(o.lineno=r),n!==void 0&&(o.colno=n),o}var Rh=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Nh=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ch=t=>{let e=Rh.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){let i=Nh.exec(e[2]);i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3])}let[n,o]=il(e[1]||Wo,e[2]);return Ds(o,n,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},Oh=[kh,Ch],Dh=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ah=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Mh=t=>{let e=Dh.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){let i=Ah.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],o=e[1]||Wo;return[o,n]=il(o,n),Ds(n,o,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Gh=[Ih,Mh],Uh=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Lh=t=>{let e=Uh.exec(t);return e?Ds(e[2],e[1]||Wo,+e[3],e[4]?+e[4]:void 0):void 0},Bh=[wh,Lh];var $h=[Oh,Gh,Bh],ol=Ro(...$h),il=(t,e)=>{let r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:Wo,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};var As={};Qs(As,{Breadcrumbs:()=>We,Dedupe:()=>Fe,GlobalHandlers:()=>ye,HttpContext:()=>$e,LinkedErrors:()=>Be,TryCatch:()=>Ve});var ye=class{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=ye.id}__init2(){this._installFunc={onerror:Fh,onunhandledrejection:zh}}constructor(e){ye.prototype.__init.call(this),ye.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;let e=this._options;for(let r in e){let n=this._installFunc[r];n&&e[r]&&(Jh(r),n(),this._installFunc[r]=void 0)}}};ye.__initStatic();function Fh(){W("error",t=>{let[e,r,n]=cl();if(!e.getIntegration(ye))return;let{msg:o,url:i,line:s,column:a,error:l}=t;if(ws()||l&&l.__sentry_own_request__)return;let u=l===void 0&&le(o)?Yh(o,i,s,a):sl(Yo(r,l||o,void 0,n,!1),i,s,a);u.level="error",al(e,l,u,"onerror")})}function zh(){W("unhandledrejection",t=>{let[e,r,n]=cl();if(!e.getIntegration(ye))return;let o=t;try{"reason"in t?o=t.reason:"detail"in t&&"reason"in t.detail&&(o=t.detail.reason)}catch{}if(ws()||o&&o.__sentry_own_request__)return!0;let i=Yr(o)?Hh(o):Yo(r,o,void 0,n,!0);i.level="error",al(e,o,i,"onunhandledrejection")})}function Hh(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Yh(t,e,r,n){let o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,i=dn(t)?t.message:t,s="Error",a=i.match(o);return a&&(s=a[1],i=a[2]),sl({exception:{values:[{type:s,value:i}]}},e,r,n)}function sl(t,e,r,n){let o=t.exception=t.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,d=isNaN(parseInt(r,10))?void 0:r,g=le(e)&&e.length>0?e:Vi();return l.length===0&&l.push({colno:u,filename:g,function:"?",in_app:!0,lineno:d}),t}function Jh(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Global Handler attached: ${t}`)}function al(t,e,r,n){pt(r,{handled:!1,type:n}),t.captureEvent(r,{originalException:e})}function cl(){let t=I(),e=t.getClient(),r=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,r.stackParser,r.attachStacktrace]}var qh=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ve=class{static __initStatic(){this.id="TryCatch"}__init(){this.name=Ve.id}constructor(e){Ve.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&V(j,"setTimeout",ll),this._options.setInterval&&V(j,"setInterval",ll),this._options.requestAnimationFrame&&V(j,"requestAnimationFrame",Wh),this._options.XMLHttpRequest&&"XMLHttpRequest"in j&&V(XMLHttpRequest.prototype,"send",Vh);let e=this._options.eventTarget;e&&(Array.isArray(e)?e:qh).forEach(Zh)}};Ve.__initStatic();function ll(t){return function(...e){let r=e[0];return e[0]=Ut(r,{mechanism:{data:{function:je(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function Wh(t){return function(e){return t.apply(this,[Ut(e,{mechanism:{data:{function:"requestAnimationFrame",handler:je(t)},handled:!0,type:"instrument"}})])}}function Vh(t){return function(...e){let r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in r&&typeof r[o]=="function"&&V(r,o,function(i){let s={mechanism:{data:{function:o,handler:je(i)},handled:!0,type:"instrument"}},a=hr(i);return a&&(s.mechanism.data.handler=je(a)),Ut(i,s)})}),t.apply(this,e)}}function Zh(t){let e=j,r=e[t]&&e[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(V(r,"addEventListener",function(n){return function(o,i,s){try{typeof i.handleEvent=="function"&&(i.handleEvent=Ut(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:je(i),target:t},handled:!0,type:"instrument"}}))}catch{}return n.apply(this,[o,Ut(i,{mechanism:{data:{function:"addEventListener",handler:je(i),target:t},handled:!0,type:"instrument"}}),s])}}),V(r,"removeEventListener",function(n){return function(o,i,s){let a=i;try{let l=a&&a.__sentry_wrapped__;l&&n.call(this,o,l,s)}catch{}return n.call(this,o,a,s)}}))}var Kh="cause",Xh=5,Be=class{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Be.id}constructor(e={}){Be.prototype.__init.call(this),this._key=e.key||Kh,this._limit=e.limit||Xh}setupOnce(){let e=I().getClient();e&&Er((r,n)=>{let o=I().getIntegration(Be);return o?Qh(e.getOptions().stackParser,o._key,o._limit,r,n):r})}};Be.__initStatic();function Qh(t,e,r,n,o){if(!n.exception||!n.exception.values||!o||!se(o.originalException,Error))return n;let i=ul(t,r,o.originalException,e);return n.exception.values=[...i,...n.exception.values],n}function ul(t,e,r,n,o=[]){if(!se(r[n],Error)||o.length+1>=e)return o;let i=Ns(t,r[n]);return ul(t,e,r[n],n,[i,...o])}var $e=class{constructor(){$e.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=$e.id}setupOnce(){Er(e=>{if(I().getIntegration($e)){if(!j.navigator&&!j.location&&!j.document)return e;let r=e.request&&e.request.url||j.location&&j.location.href,{referrer:n}=j.document||{},{userAgent:o}=j.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...o&&{"User-Agent":o}},s={...r&&{url:r},headers:i};return{...e,request:s}}return e})}};$e.__initStatic();var Fe=class{constructor(){Fe.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Fe.id}setupOnce(e,r){let n=o=>{let i=r().getIntegration(Fe);if(i){try{if(eg(o,i._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return i._previousEvent=o}return i._previousEvent=o}return o};n.id=this.name,e(n)}};Fe.__initStatic();function eg(t,e){return e?!!(tg(t,e)||rg(t,e)):!1}function tg(t,e){let r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!ml(t,e)||!fl(t,e))}function rg(t,e){let r=dl(e),n=dl(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!ml(t,e)||!fl(t,e))}function fl(t,e){let r=pl(t),n=pl(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let o=0;o<n.length;o++){let i=n[o],s=r[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function ml(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}function dl(t){return t.exception&&t.exception.values&&t.exception.values[0]}function pl(t){let e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}var gl=[new Tr.InboundFilters,new Tr.FunctionToString,new Ve,new We,new ye,new Be,new Fe,new $e];function Ms(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=gl),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),j.SENTRY_RELEASE&&j.SENTRY_RELEASE.id&&(t.release=j.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);let e={...t,stackParser:ts(t.stackParser||ol),integrations:js(t),transport:t.transport||(No()?rl:nl)};Ps(qo,e),t.autoSessionTracking&&ng()}function hl(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function ng(){if(typeof j.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}let t=I();t.captureSession&&(hl(t),W("history",({from:e,to:r})=>{e===void 0||e===r||hl(I())}))}var _l={};j.Sentry&&j.Sentry.Integrations&&(_l=j.Sentry.Integrations);var IS={..._l,...Tr,...As};function Sn(t){let e=I().getClient(),r=t||e&&e.getOptions();return!!r&&("tracesSampleRate"in r||"tracesSampler"in r)}function yt(t){let r=(t||I()).getScope();return r&&r.getTransaction()}function Q(t){return t/1e3}function bl(){W("error",yl),W("unhandledrejection",yl)}function yl(){let t=yt();if(t){let e="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}var Lt=class{__init(){this.spans=[]}constructor(e=1e3){Lt.prototype.__init.call(this),this._maxlen=e}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}},Pe=class{__init2(){this.traceId=ge()}__init3(){this.spanId=ge().substring(16)}__init4(){this.startTimestamp=Ot()}__init5(){this.tags={}}__init6(){this.data={}}__init7(){this.instrumenter="sentry"}constructor(e){if(Pe.prototype.__init2.call(this),Pe.prototype.__init3.call(this),Pe.prototype.__init4.call(this),Pe.prototype.__init5.call(this),Pe.prototype.__init6.call(this),Pe.prototype.__init7.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp),e.instrumenter&&(this.instrumenter=e.instrumenter)}startChild(e){let r=new Pe({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(r.spanRecorder=this.spanRecorder,r.spanRecorder&&r.spanRecorder.add(r),r.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&r.transaction){let n=e&&e.op||"< unknown op >",o=r.transaction.name||"< unknown name >",i=r.transaction.spanId,s=`[Tracing] Starting '${n}' span on transaction '${o}' (${i}).`;r.transaction.metadata.spanMetadata[r.spanId]={logMessage:s},f.log(s)}return r}setTag(e,r){return this.tags={...this.tags,[e]:r},this}setData(e,r){return this.data={...this.data,[e]:r},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e));let r=ig(e);return r!=="unknown_error"&&this.setStatus(r),this}isSuccess(){return this.status==="ok"}finish(e){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){let{logMessage:r}=this.transaction.metadata.spanMetadata[this.spanId];r&&f.log(r.replace("Starting","Finishing"))}this.endTimestamp=typeof e=="number"?e:Ot()}toTraceparent(){let e="";return this.sampled!==void 0&&(e=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${e}`}toContext(){return me({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=he(e.data,()=>({})),this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=he(e.spanId,()=>this.spanId),this.startTimestamp=he(e.startTimestamp,()=>this.startTimestamp),this.status=e.status,this.tags=he(e.tags,()=>({})),this.traceId=he(e.traceId,()=>this.traceId),this}getTraceContext(){return me({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return me({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}};function ig(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}var Ze=class extends Pe{__init(){this._measurements={}}__init2(){this._contexts={}}__init3(){this._frozenDynamicSamplingContext=void 0}constructor(e,r){super(e),Ze.prototype.__init.call(this),Ze.prototype.__init2.call(this),Ze.prototype.__init3.call(this),this._hub=r||I(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{},changes:[],propagations:0},this._trimEnd=e.trimEnd,this.transaction=this;let n=this.metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}setName(e,r="custom"){(e!==this.name||r!==this.metadata.source)&&this.metadata.changes.push({source:this.metadata.source,timestamp:br(),propagations:this.metadata.propagations}),this._name=e,this.metadata.source=r}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Lt(e)),this.spanRecorder.add(this)}setContext(e,r){r===null?delete this._contexts[e]:this._contexts[e]=r}setMeasurement(e,r,n=""){this._measurements[e]={value:r,unit:n}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(this.endTimestamp!==void 0)return;if(this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");let s=this._hub.getClient();s&&s.recordDroppedEvent("sample_rate","transaction");return}let r=this.spanRecorder?this.spanRecorder.spans.filter(s=>s!==this&&s.endTimestamp):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((s,a)=>s.endTimestamp&&a.endTimestamp?s.endTimestamp>a.endTimestamp?s:a:s).endTimestamp);let n=this.metadata,o={contexts:{...this._contexts,trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...n,dynamicSamplingContext:this.getDynamicSamplingContext()},...n.source&&{transaction_info:{source:n.source,changes:n.changes,propagations:n.propagations}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(o)}toContext(){let e=super.toContext();return me({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=he(e.name,()=>""),this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;let e=this._hub||I(),r=e&&e.getClient();if(!r)return{};let{environment:n,release:o}=r.getOptions()||{},{publicKey:i}=r.getDsn()||{},s=this.metadata.sampleRate,a=s!==void 0?s.toString():void 0,l=e.getScope(),{segment:u}=l&&l.getUser()||{},d=this.metadata.source,g=d&&d!=="url"?this.name:void 0;return me({environment:n,release:o,transaction:g,user_segment:u,public_key:i,trace_id:this.traceId,sample_rate:a})}};var Us=1e3,Ls=3e4,Bs=5e3,Gs=class extends Lt{constructor(e,r,n,o){super(o),this._pushActivity=e,this._popActivity=r,this.transactionSpanId=n}add(e){e.spanId!==this.transactionSpanId&&(e.finish=r=>{e.endTimestamp=typeof r=="number"?r:Ot(),this._popActivity(e.spanId)},e.endTimestamp===void 0&&this._pushActivity(e.spanId)),super.add(e)}},bt=class extends Ze{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(e,r,n=Us,o=Ls,i=Bs,s=!1){super(e,r),this._idleHub=r,this._idleTimeout=n,this._finalTimeout=o,this._heartbeatInterval=i,this._onScope=s,bt.prototype.__init.call(this),bt.prototype.__init2.call(this),bt.prototype.__init3.call(this),bt.prototype.__init4.call(this),s&&(vl(r),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),r.configureScope(a=>a.setSpan(this))),this._startIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())},this._finalTimeout)}finish(e=Ot()){if(this._finished=!0,this.activities={},this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] finishing IdleTransaction",new Date(e*1e3).toISOString(),this.op);for(let r of this._beforeFinishCallbacks)r(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanId===this.spanId)return!0;r.endTimestamp||(r.endTimestamp=e,r.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));let n=r.startTimestamp<e;return n||(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(r,void 0,2)),n}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] No active IdleTransaction");return this._onScope&&vl(this._idleHub),super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){let r=o=>{this._finished||this._pushActivity(o)},n=o=>{this._finished||this._popActivity(o)};this.spanRecorder=new Gs(r,n,this.spanId,e),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(e){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&this.finish(e)},this._idleTimeout)}_pushActivity(e){this._cancelIdleTimeout(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] popActivity ${e}`),delete this.activities[e],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){let r=Ot()+this._idleTimeout/1e3;this._startIdleTimeout(r)}}_beat(){if(this._finished)return;let e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}};function vl(t){let e=t.getScope();e&&e.getTransaction()&&e.setSpan(void 0)}function sg(){let t=this.getScope();if(t){let e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function El(t,e,r){if(!Sn(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setMetadata({sampleRate:Number(t.sampled)}),t;let n;return typeof e.tracesSampler=="function"?(n=e.tracesSampler(r),t.setMetadata({sampleRate:Number(n)})):r.parentSampled!==void 0?n=r.parentSampled:(n=e.tracesSampleRate,t.setMetadata({sampleRate:Number(n)})),ag(n)?n?(t.sampled=Math.random()<n,t.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] starting ${t.op} transaction - ${t.name}`),t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),t)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function ag(t){return pn(t)||!(typeof t=="number"||typeof t=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function cg(t,e){let r=this.getClient(),n=r&&r.getOptions()||{},o=n.instrumenter||"sentry",i=t.instrumenter||"sentry";o!==i&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${o}\` instrumenter.
The transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),t.sampled=!1);let s=new Ze(t,this);return s=El(s,n,{parentSampled:t.parentSampled,transactionContext:t,...e}),s.sampled&&s.initSpanRecorder(n._experiments&&n._experiments.maxSpans),s}function $s(t,e,r,n,o,i,s){let a=t.getClient(),l=a&&a.getOptions()||{},u=new bt(e,t,r,n,s,o);return u=El(u,l,{parentSampled:e.parentSampled,transactionContext:e,...i}),u.sampled&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),u}function lg(){let t=Mt();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=cg),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=sg))}function ug(){let t=Mt();if(!t.__SENTRY__)return;let e={mongodb(){let n=Ue(module,"./integrations/node/mongo");return new n.Mongo},mongoose(){let n=Ue(module,"./integrations/node/mongo");return new n.Mongo({mongoose:!0})},mysql(){let n=Ue(module,"./integrations/node/mysql");return new n.Mysql},pg(){let n=Ue(module,"./integrations/node/postgres");return new n.Postgres}},r=Object.keys(e).filter(n=>!!ss(n)).map(n=>{try{return e[n]()}catch{return}}).filter(n=>n);r.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...r])}function Tl(){lg(),yr()&&ug(),bl()}var w=X;function Sl(){w&&w.document?w.document.addEventListener("visibilitychange",()=>{let t=yt();if(w.document.hidden&&t){let e="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t.op}`),t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var Zr=(t,e,r)=>{let n,o;return i=>{e.value>=0&&(i||r)&&(o=e.value-(n||0),(o||n===void 0)&&(n=e.value,e.delta=o,t(e)))}};var xl=()=>`v3-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var dg=()=>{let t=w.performance.timing,e=w.performance.navigation.type,r={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(let n in t)n!=="navigationStart"&&n!=="toJSON"&&(r[n]=Math.max(t[n]-t.navigationStart,0));return r},Vo=()=>w.__WEB_VITALS_POLYFILL__?w.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||dg()):w.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];var Zo=()=>{let t=Vo();return t&&t.activationStart||0};var Kr=(t,e)=>{let r=Vo(),n="navigate";return r&&(w.document.prerendering||Zo()>0?n="prerender":n=r.type.replace(/_/g,"-")),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:xl(),navigationType:n}};var Bt=(t,e,r)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){let n=new PerformanceObserver(o=>{e(o.getEntries())});return n.observe(Object.assign({type:t,buffered:!0},r||{})),n}}catch{}};var $t=(t,e)=>{let r=n=>{(n.type==="pagehide"||w.document.visibilityState==="hidden")&&(t(n),e&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)};var jl=t=>{let e=Kr("CLS",0),r,n=0,o=[],i=a=>{a.forEach(l=>{if(!l.hadRecentInput){let u=o[0],d=o[o.length-1];n&&o.length!==0&&l.startTime-d.startTime<1e3&&l.startTime-u.startTime<5e3?(n+=l.value,o.push(l)):(n=l.value,o=[l]),n>e.value&&(e.value=n,e.entries=o,r&&r())}})},s=Bt("layout-shift",i);s&&(r=Zr(t,e),$t(()=>{i(s.takeRecords()),r(!0)}))};var Ko=-1,pg=()=>w.document.visibilityState==="hidden"&&!w.document.prerendering?0:1/0,fg=()=>{$t(({timeStamp:t})=>{Ko=t},!0)},Xr=()=>(Ko<0&&(Ko=pg(),fg()),{get firstHiddenTime(){return Ko}});var Pl=t=>{let e=Xr(),r=Kr("FID"),n,o=a=>{a.startTime<e.firstHiddenTime&&(r.value=a.processingStart-a.startTime,r.entries.push(a),n(!0))},i=a=>{a.forEach(o)},s=Bt("first-input",i);n=Zr(t,r),s&&$t(()=>{i(s.takeRecords()),s.disconnect()},!0)};var kl={},wl=t=>{let e=Xr(),r=Kr("LCP"),n,o=s=>{let a=s[s.length-1];if(a){let l=Math.max(a.startTime-Zo(),0);l<e.firstHiddenTime&&(r.value=l,r.entries=[a],n())}},i=Bt("largest-contentful-paint",o);if(i){n=Zr(t,r);let s=()=>{kl[r.id]||(o(i.takeRecords()),i.disconnect(),kl[r.id]=!0,n(!0))};["keydown","click"].forEach(a=>{addEventListener(a,s,{once:!0,capture:!0})}),$t(s,!0)}};function Xo(t){return typeof t=="number"&&isFinite(t)}function Sr(t,{startTimestamp:e,...r}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...r})}function Rl(){return w&&w.addEventListener&&w.performance}var Il=0,q={},Ke,xn;function Nl(){let t=Rl();t&&vr&&(t.mark&&w.performance.mark("sentry-tracing-init"),mg(),hg(),gg())}function Cl(){Bt("longtask",e=>{for(let r of e){let n=yt();if(!n)return;let o=Q(vr+r.startTime),i=Q(r.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:o,endTimestamp:o+i})}})}function mg(){jl(t=>{let e=t.entries.pop();e&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding CLS"),q.cls={value:t.value,unit:""},xn=e)})}function hg(){wl(t=>{let e=t.entries.pop();e&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding LCP"),q.lcp={value:t.value,unit:"millisecond"},Ke=e)})}function gg(){Pl(t=>{let e=t.entries.pop();if(!e)return;let r=Q(vr),n=Q(e.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding FID"),q.fid={value:t.value,unit:"millisecond"},q["mark.fid"]={value:r+n,unit:"second"}})}function Ol(t){let e=Rl();if(!e||!w.performance.getEntries||!vr)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] Adding & adjusting spans using Performance API");let r=Q(vr),n=e.getEntries(),o,i;if(n.slice(Il).forEach(s=>{let a=Q(s.startTime),l=Q(s.duration);if(!(t.op==="navigation"&&r+a<t.startTimestamp))switch(s.entryType){case"navigation":{yg(t,s,r),o=r+Q(s.responseStart),i=r+Q(s.requestStart);break}case"mark":case"paint":case"measure":{_g(t,s,a,l,r);let u=Xr(),d=s.startTime<u.firstHiddenTime;s.name==="first-paint"&&d&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding FP"),q.fp={value:s.startTime,unit:"millisecond"}),s.name==="first-contentful-paint"&&d&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding FCP"),q.fcp={value:s.startTime,unit:"millisecond"});break}case"resource":{let u=s.name.replace(w.location.origin,"");vg(t,s,u,a,l,r);break}default:}}),Il=Math.max(n.length-1,0),Eg(t),t.op==="pageload"){typeof o=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding TTFB"),q.ttfb={value:(o-t.startTimestamp)*1e3,unit:"millisecond"},typeof i=="number"&&i<=o&&(q["ttfb.requestTime"]={value:(o-i)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!q[a]||r>=t.startTimestamp)return;let l=q[a].value,u=r+Q(l),d=Math.abs((u-t.startTimestamp)*1e3),g=d-l;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Measurements] Normalized ${a} from ${l} to ${d} (${g})`),q[a].value=d});let s=q["mark.fid"];s&&q.fid&&(Sr(t,{description:"first input delay",endTimestamp:s.value+Q(q.fid.value),op:"ui.action",startTimestamp:s.value}),delete q["mark.fid"]),"fcp"in q||delete q.cls,Object.keys(q).forEach(a=>{t.setMeasurement(a,q[a].value,q[a].unit)}),Tg(t)}Ke=void 0,xn=void 0,q={}}function _g(t,e,r,n,o){let i=o+r,s=i+n;return Sr(t,{description:e.name,endTimestamp:s,op:e.entryType,startTimestamp:i}),i}function yg(t,e,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(n=>{Qo(t,e,n,r)}),Qo(t,e,"secureConnection",r,"TLS/SSL","connectEnd"),Qo(t,e,"fetch",r,"cache","domainLookupStart"),Qo(t,e,"domainLookup",r,"DNS"),bg(t,e,r)}function Qo(t,e,r,n,o,i){let s=i?e[i]:e[`${r}End`],a=e[`${r}Start`];!a||!s||Sr(t,{op:"browser",description:he(o,()=>r),startTimestamp:n+Q(a),endTimestamp:n+Q(s)})}function bg(t,e,r){Sr(t,{op:"browser",description:"request",startTimestamp:r+Q(e.requestStart),endTimestamp:r+Q(e.responseEnd)}),Sr(t,{op:"browser",description:"response",startTimestamp:r+Q(e.responseStart),endTimestamp:r+Q(e.responseEnd)})}function vg(t,e,r,n,o,i){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;let s={};"transferSize"in e&&(s["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(s["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(s["Decoded Body Size"]=e.decodedBodySize);let a=i+n,l=a+o;Sr(t,{description:r,endTimestamp:l,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",startTimestamp:a,data:s})}function Eg(t){let e=w.navigator;if(!e)return;let r=e.connection;r&&(r.effectiveType&&t.setTag("effectiveConnectionType",r.effectiveType),r.type&&t.setTag("connectionType",r.type),Xo(r.rtt)&&(q["connection.rtt"]={value:r.rtt,unit:"millisecond"})),Xo(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),Xo(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function Tg(t){Ke&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding LCP Data"),Ke.element&&t.setTag("lcp.element",dt(Ke.element)),Ke.id&&t.setTag("lcp.id",Ke.id),Ke.url&&t.setTag("lcp.url",Ke.url.trim().slice(0,200)),t.setTag("lcp.size",Ke.size)),xn&&xn.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding CLS Data"),xn.sources.forEach((e,r)=>t.setTag(`cls.source.${r+1}`,dt(e.node))))}var Fs=["localhost",/^\//],ei={traceFetch:!0,traceXHR:!0,tracingOrigins:Fs,tracePropagationTargets:Fs};function Dl(t){let{traceFetch:e,traceXHR:r,tracePropagationTargets:n,tracingOrigins:o,shouldCreateSpanForRequest:i}={traceFetch:ei.traceFetch,traceXHR:ei.traceXHR,...t},s=typeof i=="function"?i:u=>!0,a=u=>Sg(u,n||o),l={};e&&W("fetch",u=>{xg(u,s,a,l)}),r&&W("xhr",u=>{Pg(u,s,a,l)})}function Sg(t,e){return mr(t,e||Fs)}function xg(t,e,r,n){if(!Sn()||!(t.fetchData&&e(t.fetchData.url)))return;if(t.endTimestamp){let i=t.fetchData.__span;if(!i)return;let s=n[i];s&&(t.response?s.setHttpStatus(t.response.status):t.error&&s.setStatus("internal_error"),s.finish(),delete n[i]);return}let o=yt();if(o){let i=o.startChild({data:{...t.fetchData,type:"fetch"},description:`${t.fetchData.method} ${t.fetchData.url}`,op:"http.client"});t.fetchData.__span=i.spanId,n[i.spanId]=i;let s=t.args[0];t.args[1]=t.args[1]||{};let a=t.args[1];r(t.fetchData.url)&&(a.headers=jg(s,o.getDynamicSamplingContext(),i,a),o.metadata.propagations++)}}function jg(t,e,r,n){let o=$o(e),i=r.toTraceparent(),s=typeof Request<"u"&&se(t,Request)?t.headers:n.headers;if(s)if(typeof Headers<"u"&&se(s,Headers)){let a=new Headers(s);return a.append("sentry-trace",i),o&&a.append(bn,o),a}else if(Array.isArray(s)){let a=[...s,["sentry-trace",i]];return o&&a.push([bn,o]),a}else{let a="baggage"in s?s.baggage:void 0,l=[];return Array.isArray(a)?l.push(...a):a&&l.push(a),o&&l.push(o),{...s,"sentry-trace":i,baggage:l.length>0?l.join(","):void 0}}else return{"sentry-trace":i,baggage:o}}function Pg(t,e,r,n){if(!Sn()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;let o=t.xhr.__sentry_xhr__;if(t.endTimestamp){let s=t.xhr.__sentry_xhr_span_id__;if(!s)return;let a=n[s];a&&(a.setHttpStatus(o.status_code),a.finish(),delete n[s]);return}let i=yt();if(i){let s=i.startChild({data:{...o.data,type:"xhr",method:o.method,url:o.url},description:`${o.method} ${o.url}`,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=s.spanId,n[t.xhr.__sentry_xhr_span_id__]=s,t.xhr.setRequestHeader&&r(t.xhr.__sentry_xhr__.url))try{t.xhr.setRequestHeader("sentry-trace",s.toTraceparent());let a=i.getDynamicSamplingContext(),l=$o(a);l&&t.xhr.setRequestHeader(bn,l),i.metadata.propagations++}catch{}}}function Al(t,e=!0,r=!0){if(!w||!w.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Could not initialize routing instrumentation due to invalid location");return}let n=w.location.href,o;e&&(o=t({name:w.location.pathname,op:"pageload",metadata:{source:"url"}})),r&&W("history",({to:i,from:s})=>{if(s===void 0&&n&&n.indexOf(i)!==-1){n=void 0;return}s!==i&&(n=void 0,o&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Finishing current transaction with op: ${o.op}`),o.finish()),o=t({name:w.location.pathname,op:"navigation",metadata:{source:"url"}}))})}var Gl="BrowserTracing",kg={idleTimeout:Us,finalTimeout:Ls,heartbeatInterval:Bs,markBackgroundTransactions:!0,routingInstrumentation:Al,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0,enableInteractions:!1},...ei},xr=class{__init(){this.name=Gl}constructor(e){xr.prototype.__init.call(this),this.options={...kg,...e},e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),Nl(),gr([this,"access",r=>r.options,"access",r=>r._experiments,"optionalAccess",r=>r.enableLongTask])&&Cl()}setupOnce(e,r){this._getCurrentHub=r;let{routingInstrumentation:n,startTransactionOnLocationChange:o,startTransactionOnPageLoad:i,markBackgroundTransactions:s,traceFetch:a,traceXHR:l,tracePropagationTargets:u,shouldCreateSpanForRequest:d,_experiments:g}=this.options;n(S=>this._createRouteTransaction(S),i,o),s&&Sl(),gr([g,"optionalAccess",S=>S.enableInteractions])&&this._registerInteractionListener(),Dl({traceFetch:a,traceXHR:l,tracePropagationTargets:u,shouldCreateSpanForRequest:d})}_createRouteTransaction(e){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}let{beforeNavigate:r,idleTimeout:n,finalTimeout:o,heartbeatInterval:i}=this.options,s=e.op==="pageload",a=s?Ml("sentry-trace"):null,l=s?Ml("baggage"):null,u=a?ds(a):void 0,d=l?vs(l):void 0,g={...e,...u,metadata:{...e.metadata,dynamicSamplingContext:u&&!d?{}:d},trimEnd:!0},S=typeof r=="function"?r(g):g,E=S===void 0?{...g,sampled:!1}:S;E.metadata=E.name!==g.name?{...E.metadata,source:"custom"}:E.metadata,this._latestRouteName=E.name,this._latestRouteSource=gr([E,"access",zt=>zt.metadata,"optionalAccess",zt=>zt.source]),E.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Will not send ${E.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Starting ${E.op} transaction on scope`);let Ft=this._getCurrentHub(),{location:ri}=w,jr=$s(Ft,E,n,o,!0,{location:ri},i);return jr.registerBeforeFinishCallback(zt=>{Ol(zt)}),jr}_registerInteractionListener(){let e,r=()=>{let{idleTimeout:n,finalTimeout:o,heartbeatInterval:i}=this.options,s="ui.action.click";if(e&&(e.finish(),e=void 0),!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`);return}let a=this._getCurrentHub(),{location:l}=w,u={name:this._latestRouteName,op:s,trimEnd:!0,metadata:{source:he(this._latestRouteSource,()=>"url")}};e=$s(a,u,n,o,!0,{location:l},i)};["click"].forEach(n=>{addEventListener(n,r,{once:!1,capture:!0})})}};function Ml(t){let e=Zi(`meta[name=${t}]`);return e?e.getAttribute("content"):null}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&Tl();var en=ja(),wg=te.getPlatform(),vt=new to(en),Ll={now:Date.now(),conf:{env:en,platform:wg}};vt.debug("flags",Ll);var b=Mr.init(Ll,vt),be=new no(vt),ke=new vo(en,vt);vt.info(`Hi there! I hope you are enjoying Azimutt \u{1F44D}\uFE0F

Did you know you can access your current project in the console?
And even trigger some actions in Azimutt?

Just look at \`azimutt\` variable and perform what you want.
For example, here is how to count the total number of columns in all sources:
  \`azimutt.project.sources.flatMap(s => s.tables).flatMap(t => t.columns).length\`

Use \`azimutt.help()\` for more details!`);window.azimutt=new Qn(b,vt);"serviceWorker"in navigator&&en===xe.enum.prod&&navigator.serviceWorker.register("/service-worker.js");b.on("Click",t=>te.getElementById(t.id).click());b.on("MouseDown",t=>te.getElementById(t.id).dispatchEvent(new Event("mousedown")));b.on("Focus",t=>te.getElementById(t.id).focus());b.on("Blur",t=>te.getElementById(t.id).blur());b.on("ScrollTo",t=>te.maybeElementById(t.id).forEach(e=>e.scrollIntoView(t.position!==Ln.enum.end)));b.on("Fullscreen",t=>te.fullscreen(t.id).then(()=>b.fitToScreen()));b.on("SetMeta",Ig);b.on("AutofocusWithin",t=>{var e;return(e=te.getElementById(t.id).querySelector("[autofocus]"))==null?void 0:e.focus()});b.on("Toast",t=>b.toast(t.level,t.message));b.on("GetProject",Rg);b.on("CreateProjectTmp",Ng);b.on("UpdateProjectTmp",Cg);b.on("CreateProject",Og);b.on("UpdateProject",Dg);b.on("DeleteProject",Ag);b.on("ProjectDirty",Mg);b.on("DownloadFile",t=>te.downloadFile(t.filename,t.content));b.on("GetLocalFile",Gg);b.on("GetTableStats",Ug);b.on("GetColumnStats",Lg);b.on("ObserveSizes",Bg);b.on("ListenKeys",Fg);b.on("Confetti",t=>te.launchConfetti(t.id));b.on("ConfettiPride",t=>te.launchConfettiPride());b.on("Fireworks",t=>te.launchFireworks());b.on("Track",t=>ke.trackEvent(t.event));b.noListeners().length>0&&en!==xe.enum.prod&&vt.error(`Do not listen to elm events: ${b.noListeners().join(", ")}`);function Ig(t){var e,r,n,o,i,s,a,l,u;if(typeof t.title=="string"&&(document.title=t.title,(e=document.querySelector('meta[property="og:title"]'))==null||e.setAttribute("content",t.title),(r=document.querySelector('meta[name="twitter:title"]'))==null||r.setAttribute("content",t.title)),typeof t.description=="string"&&((n=document.querySelector('meta[name="description"]'))==null||n.setAttribute("content",t.description),(o=document.querySelector('meta[property="og:description"]'))==null||o.setAttribute("content",t.description),(i=document.querySelector('meta[name="twitter:description"]'))==null||i.setAttribute("content",t.description)),typeof t.canonical=="string"){let d=document.querySelector('link[rel="canonical"]');d?d.setAttribute("href",t.canonical):document.head.append(`<link rel="canonical" href="${t.canonical}">`),(s=document.querySelector('meta[property="og:url"]'))==null||s.setAttribute("content",t.canonical),(a=document.querySelector('meta[name="twitter:url"]'))==null||a.setAttribute("content",t.canonical)}typeof t.html=="string"&&((l=document.getElementsByTagName("html")[0])==null||l.setAttribute("class",t.html)),typeof t.body=="string"&&((u=document.getElementsByTagName("body")[0])==null||u.setAttribute("class",t.body))}function Rg(t){(t.project===sr?be.getProject(t.project).then(e=>Si(t.project,e)):ke.getProject(t.organization,t.project,t.token).then(e=>e.storage===A.enum.remote?Zn(e,e.content):e.storage===A.enum.local?be.getProject(t.project).then(r=>Vn(e,r)):Promise.reject("Invalid storage"))).then(e=>b.gotProject(e),e=>{e.statusCode===401?window.location.replace(ke.loginUrl(hc(window.location))):(Z("Can't load project",e),b.gotProject(void 0))})}function Ng(t){let e=kt(t.project);be.deleteProject(sr).then(r=>be.createProject(sr,e)).then(r=>b.gotProject(Si(t.project.id,e)),r=>Z("Can't save draft project",r))}function Cg(t){let e=kt(t.project);be.updateProject(sr,e).then(r=>null,r=>Z("Can't update draft project",r))}function Og(t){let e=kt(t.project);t.storage==A.enum.local?ke.createProjectLocal(t.organization,e).then(r=>be.createProject(r.id,e).then(n=>Vn(r,e),n=>(Z("Can't save project locally",n),ke.deleteProject(t.organization,r.id).then(o=>Promise.reject(n)))),r=>(Z("Can't save project to backend",r),Promise.reject(r))).then(r=>Promise.all([be.deleteProject(sr),be.deleteProject(t.project.id)]).catch(n=>(Z("Can't delete temporary project",n),Promise.resolve())).then(n=>{b.toast(fe.enum.success,"Project created!"),window.history.replaceState("","",`/${t.organization}/${r.id}`),b.gotProject(r)})):t.storage==A.enum.remote?ke.createProjectRemote(t.organization,e).then(r=>Promise.all([be.deleteProject(sr),be.deleteProject(t.project.id)]).catch(n=>(Z("Can't delete temporary project",n),Promise.resolve())).then(n=>{b.toast(fe.enum.success,"Project created!"),window.history.replaceState("","",`/${t.organization}/${r.id}`),b.gotProject(Zn(r,e))}),r=>Z("Can't save project to backend",r)):Z("Unknown ProjectStorage",t.storage)}function Dg(t){let e=kt(t.project);if(!t.project.organization)return Z("Expecting an organization to update project");t.project.storage==A.enum.local?ke.updateProjectLocal(t.project).then(r=>be.updateProject(r.id,e).then(n=>{b.toast(fe.enum.success,"Project saved"),b.gotProject(Vn(r,e))},n=>Z("Can't update project locally",n)),r=>Z("Can't update project to backend",r)):t.project.storage==A.enum.remote?ke.updateProjectRemote(t.project).then(r=>{b.toast(fe.enum.success,"Project saved"),b.gotProject(Zn(r,e))},r=>Z("Can't update project",r)):Z("Unknown ProjectStorage",t.project.storage)}function Ag(t){t.project.organization?ke.deleteProject(t.project.organization.id,t.project.id).catch(e=>(Z("Can't delete project in backend",e),Promise.reject(e))).then(e=>{if(t.project.storage==A.enum.local)return be.deleteProject(t.project.id).catch(r=>(Z("Can't delete project locally",r),Promise.reject(r)))}).then(e=>t.redirect?window.location.href=t.redirect:b.dropProject(t.project.id)):be.deleteProject(t.project.id).catch(e=>(Z("Can't delete project locally",e),Promise.reject(e))).then(e=>t.redirect?window.location.href=t.redirect:b.dropProject(t.project.id))}window.isDirty=!1;window.addEventListener("beforeunload",function(t){if(window.isDirty){let e="Your project is not saved, want to leave?";return t.returnValue=e,e}});function Mg(t){window.isDirty=t.dirty}function Gg(t){let e=new FileReader;e.onload=r=>b.gotLocalFile(t,r.target.result),e.readAsText(t.file)}var zs={};function Ug(t){let e=`${t.source}-${t.table}`;zs[e]?b.gotTableStats(t.source,zs[e]):ke.getTableStats(t.database,t.table).then(r=>b.gotTableStats(t.source,zs[e]=r),r=>r.statusCode!==404&&Z(`Can't get stats for ${t.table}`,r))}var Hs={};function Lg(t){let e=`${t.source}-${t.column.table}.${t.column.column}`;Hs[e]?b.gotColumnStats(t.source,Hs[e]):ke.getColumnStats(t.database,t.column).then(r=>b.gotColumnStats(t.source,Hs[e]=r),r=>r.statusCode!==404&&Z(`Can't get stats for ${t.column}`,r))}var Bl=new ResizeObserver(t=>{b.updateSizes(t.map(e=>{let r=e.target.getBoundingClientRect(),n={width:r.width,height:r.height};return{id:e.target.id,position:{clientX:r.left,clientY:r.top},size:n,seeds:{dx:Math.random(),dy:Math.random()}}}))});function Bg(t){t.ids.forEach(e=>{let r=document.getElementById(e);r?Bl.observe(r):$l(e,20)})}function $l(t,e){e>0&&setTimeout(()=>{let r=document.getElementById(t);r?Bl.observe(r):$l(t,e-1)},200)}var Qr={};function Ul(t){return t.localName==="input"||t.localName==="textarea"}function $g(t){let e=t.target,r=(Qr[t.key]||[]).filter(n=>(te.getPlatform()===rn.enum.pc?n.ctrl===t.ctrlKey:n.ctrl===t.metaKey)&&(!n.shift||t.shiftKey)&&n.alt===t.altKey&&(!n.target&&(n.onInput||!Ul(e))||n.target&&(!n.target.id||n.target.id===e.id)&&(!n.target.class||e.className.split(" ").includes(n.target.class))&&(!n.target.tag||n.target.tag===e.localName)));r.map(n=>{n.preventDefault&&t.preventDefault(),b.gotHotkey(n)}),r.length===0&&t.key==="Escape"&&Ul(e)&&e.blur()}function Fg(t){Object.keys(Qr).forEach(e=>Qr[e]=[]),Object.entries(t.keys).forEach(([e,r])=>{r.forEach(n=>{Qr[n.key]||(Qr[n.key]=[]),Qr[n.key].push(ae(re({},n),{id:e}))})})}var ti={drag:!1};function zg(t){t.code==="Space"&&(!ti.drag&&t.target.localName!=="input"&&b.gotKeyHold(t.code,!0),ti.drag=!0)}function Hg(t){t.code==="Space"&&(ti.drag&&b.gotKeyHold(t.code,!1),ti.drag=!1)}function Z(t,e){e===void 0?(vt.error(t),b.toast(fe.enum.error,t)):(vt.error(t,e),b.toast(fe.enum.error,`${t}: ${at(e)}`))}function Yg(t){let e=t.target,r=te.findParent(e,o=>!!o.getAttribute("data-track-event"));if(r){let o=r.getAttribute("data-track-event")||"click",i={label:(r.textContent||"").trim()},s=r.attributes;for(let d=0;d<s.length;d++){let g=s[d];g.name.startsWith("data-track-event-")&&(i[g.name.replace("data-track-event-","")]=g.value)}let n=i,{organization:a,project:l}=n,u=Qe(n,["organization","project"]);ke.trackEvent({name:o,details:u,organization:a,project:l})}}document.addEventListener("click",t=>{Yg(t)});document.addEventListener("keydown",t=>{$g(t),zg(t)});document.addEventListener("keyup",t=>{Hg(t)});en===xe.enum.prod&&Ms({dsn:"https://52a062c4168f402485783ad10fe2ccc2@o1353262.ingest.sentry.io/4504471109304320",integrations:[new xr],tracesSampleRate:1});Pa();})();
/*! Bundled license information:

jiff/lib/lcs.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/array.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPointerParse.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPointer.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/clone.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPatch.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/jiff.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
*/
//# sourceMappingURL=./script.js-cba3440afefad320fd405d6c5de08b7d.map
